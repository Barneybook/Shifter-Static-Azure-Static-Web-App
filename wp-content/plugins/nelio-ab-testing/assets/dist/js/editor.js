this.nab=this.nab||{},this.nab.editor=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=250)}({0:function(e,t){!function(){e.exports=this.wp.i18n}()},1:function(e,t){!function(){e.exports=this.wp.element}()},10:function(e,t){!function(){e.exports=this.wp.compose}()},11:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},110:function(e,t,n){},12:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},123:function(e,t){!function(){e.exports=this.wp.blockEditor}()},13:function(e,t,n){var r=n(36),i=n(22);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},14:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},15:function(e,t,n){var r=n(43);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},16:function(e,t){!function(){e.exports=this.nab.components}()},17:function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&e.push(o)}else if("object"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=c(n(4)),a=c(n(49)),o=c(n(52));function c(e){return e&&e.__esModule?e:{default:e}}var s=void 0;function l(e,t){var n,o,c,u,b,p,d,m,f=[],v={};for(p=0;p<e.length;p++)if("string"!==(b=e[p]).type){if(!t.hasOwnProperty(b.value)||void 0===t[b.value])throw new Error("Invalid interpolation, missing component node: `"+b.value+"`");if("object"!==r(t[b.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+b.value+"`","\n> "+s);if("componentClose"===b.type)throw new Error("Missing opening component token: `"+b.value+"`");if("componentOpen"===b.type){n=t[b.value],c=p;break}f.push(t[b.value])}else f.push(b.value);return n&&(u=function(e,t){var n,r,i=t[e],a=0;for(r=e+1;r<t.length;r++)if((n=t[r]).value===i.value){if("componentOpen"===n.type){a++;continue}if("componentClose"===n.type){if(0===a)return r;a--}}throw new Error("Missing closing component token `"+i.value+"`")}(c,e),d=l(e.slice(c+1,u),t),o=i.default.cloneElement(n,{},d),f.push(o),u<e.length-1&&(m=l(e.slice(u+1),t),f=f.concat(m))),1===f.length?f[0]:(f.forEach((function(e,t){e&&(v["interpolation-child-"+t]=e)})),(0,a.default)(v))}t.default=function(e){var t=e.mixedString,n=e.components,i=e.throwErrors;if(s=t,!n)return t;if("object"!==(void 0===n?"undefined":r(n))){if(i)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var a=(0,o.default)(t);try{return l(a,n)}catch(e){if(i)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},19:function(e,t){!function(){e.exports=this.nab.utils}()},2:function(e,t){!function(){e.exports=this.lodash}()},21:function(e,t){!function(){e.exports=this.wp.date}()},22:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},226:function(e,t){!function(){e.exports=this.wp.coreData}()},227:function(e,t){!function(){e.exports=this.nab.data}()},228:function(e,t,n){},229:function(e,t,n){},23:function(e,t){!function(){e.exports=this.wp.url}()},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"activeGoalId",(function(){return wt})),n.d(r,"isExperimentBeingSaved",(function(){return St})),n.d(r,"hasExperimentBeenRecentlySaved",(function(){return It})),n.d(r,"draftStatusRationale",(function(){return Pt}));var i={};n.r(i),n.d(i,"getAlternative",(function(){return Ht})),n.d(i,"getAlternativeIds",(function(){return Wt})),n.d(i,"getConversionActions",(function(){return Xt})),n.d(i,"isExperimentBeingSaved",(function(){return zt})),n.d(i,"hasExperimentBeenRecentlySaved",(function(){return $t})),n.d(i,"getActiveGoal",(function(){return Qt})),n.d(i,"getActiveGoalIndex",(function(){return Yt})),n.d(i,"getDraftStatusRationale",(function(){return qt})),n.d(i,"getExperimentId",(function(){return Jt})),n.d(i,"getExperimentType",(function(){return Kt})),n.d(i,"getExperimentAttribute",(function(){return Zt})),n.d(i,"isTestedElementInvalid",(function(){return en})),n.d(i,"getGoals",(function(){return tn})),n.d(i,"getScope",(function(){return nn}));var a={};n.r(a),n.d(a,"addAlternatives",(function(){return rn})),n.d(a,"removeAlternatives",(function(){return an})),n.d(a,"updateAlternative",(function(){return on})),n.d(a,"addConversionActionsIntoGoal",(function(){return cn})),n.d(a,"replaceConversionActionsInGoal",(function(){return sn})),n.d(a,"removeConversionActionsFromGoal",(function(){return ln})),n.d(a,"updateConversionAction",(function(){return un})),n.d(a,"setupEditor",(function(){return yn})),n.d(a,"setActiveGoal",(function(){return En})),n.d(a,"setExperimentAsBeingSaved",(function(){return _n})),n.d(a,"setDraftStatusRationale",(function(){return An})),n.d(a,"setExperimentAsRecentlySaved",(function(){return wn})),n.d(a,"saveExperiment",(function(){return Sn})),n.d(a,"saveExperimentAndEditAlternative",(function(){return In})),n.d(a,"moveToTrash",(function(){return Pn})),n.d(a,"startExperiment",(function(){return Dn})),n.d(a,"resumeExperiment",(function(){return Tn})),n.d(a,"setExperimentData",(function(){return kn})),n.d(a,"setTestedElementAsInvalid",(function(){return Rn})),n.d(a,"addGoals",(function(){return Cn})),n.d(a,"removeGoals",(function(){return Gn})),n.d(a,"updateGoal",(function(){return Bn})),n.d(a,"addScopeRules",(function(){return Ln})),n.d(a,"removeScopeRules",(function(){return Vn}));var o=n(1),c=(n(226),n(5)),s=n(31),l=n.n(s),u=(n(227),n(64)),b=n(65),p=n(16),d=n(2),m=n(11),f=n.n(m),v=n(12),O=n.n(v),g=n(13),j=n.n(g),h=n(14),x=n.n(h),y=n(15),E=n.n(y),_=(n(228),n(19)),A=function(e){function t(){var e;f()(this,t);var n=(e=j()(this,x()(t).apply(this,arguments))).props,r=n.setupEditor,i=n.experiment,a=n.setActiveGoal,o=i.goals[0]||Object(_.createGoal)();return r(i),a(o.id),e}return E()(t,e),O()(t,[{key:"render",value:function(){var e=this.props.children;return Object(o.createElement)("div",null,e)}}]),t}(o.Component),w=Object(c.withDispatch)((function(e){var t=e("nab/editor");return{setupEditor:t.setupEditor,setActiveGoal:t.setActiveGoal}}))(A),S=n(6),I=n(10),P=n(0),D=(n(229),n(9)),T=n.n(D),N=n(21),k=n(34);function R(e,t){var n=e.control,r=e.numberOfAlternatives,i=e.goals,a=e.name,o=e.type;if(!a)return Object(P._x)("Test is unnamed","text","nelio-ab-testing");if(r<2)return Object(P._x)("Test doesn’t have any variants","text","nelio-ab-testing");var c=G(n.attributes,o);if(c)return c;var s=function(e,t){if(!e.length)return Object(P._x)("Test doesn’t have any goals","text","nelio-ab-testing");for(var n=0;n<e.length;++n){var r=B(e[n],n,t);if(r)return r}return!1}(i,t);return s||!1}function C(e,t){return!!G(e.attributes,t)}function G(e,t){var n=!(!!e&&!Object(d.isEmpty)(e)&&Object(d.values)(e).reduce((function(e,t){return e&&!!t}),!0))&&Object(P._x)("Test doesn’t specify the tested element","text","nelio-ab-testing");return Object(k.applyFilters)("nab.isTestedElementInvalid",n,e,t)}function B(e,t,n){if(!e.conversionActions.length)return Object(P.sprintf)(Object(P._x)("%s doesn’t have any conversion actions","text","nelio-ab-testing"),L(e,t));for(var r=0;r<e.conversionActions.length;++r){var i=e.conversionActions[r],a=n[i.type];if(!a)return Object(P.sprintf)(Object(P._x)("%s has one or more invalid conversion actions","text","nelio-ab-testing"),L(e,t));if(!Object(d.isEmpty)(a.validate(i.attributes)))return Object(P.sprintf)(Object(P._x)("One or more conversion actions in %s are invalid","text","nelio-ab-testing"),L(e,t))}return!1}function L(e,t){var n=Object(P.sprintf)(Object(P._x)("Goal %d","text","nelio-ab-testing"),t+1);return 0===t&&(n=Object(P._x)("Default Goal","text","nelio-ab-testing")),Object(d.trim)(e.attributes.name)&&(n=Object(P.sprintf)(Object(P._x)("Goal “%s”","text","nelio-ab-testing"),Object(d.trim)(e.attributes.name))),n}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=function(e){function t(){var e,n;f()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=(n=j()(this,(e=x()(t)).call.apply(e,[this].concat(i)))).props,c=o.control,s=o.numberOfAlternatives,l=o.conversionActionTypes,u=o.goals,b=o.name,p=o.type,d=o.onStatusUpdate,m=o.setTestedElementAsInvalid,v=R({name:b,control:c,numberOfAlternatives:s,goals:u,type:p},l);return v&&d("draft",v),m(C(c,p)),n}return E()(t,e),O()(t,[{key:"componentDidUpdate",value:function(e){var t=e.control,n=e.numberOfAlternatives,r=e.goals,i=e.name,a=e.startDate,o=this.props,c=o.control,s=o.numberOfAlternatives,l=o.conversionActionTypes,u=o.goals,b=o.name,p=o.startDate,d=o.status,m=o.type,f=o.onStatusUpdate,v=o.setTestedElementAsInvalid;if("running"!==d&&(c!==t||p!==a||s!==n||!function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].id!==t[n].id)return!1;if(e[n].name!==t[n].name)return!1}for(var r=0;r<e.length;++r)if(!M(e[r].conversionActions,t[r].conversionActions))return!1;return!0}(r,u)||i!==b)){v(C(c,m));var O=R({name:b,control:c,numberOfAlternatives:s,goals:u,type:m},l);O?f("draft",O):"ready"!==d&&("scheduled"!==d||Object(N.isInTheFuture)(p)||f("ready"),"scheduled"!==d&&f("ready"))}}},{key:"render",value:function(){return null}}]),t}(o.Component);function M(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}var F=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getAlternative,r=t.getAlternativeIds,i=t.getConversionActions,a=t.getExperimentAttribute,o=t.getExperimentType,c=(0,t.getGoals)().map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{conversionActions:i(e.id)})})),s=a("status");return{control:n("control"),numberOfAlternatives:r().length,conversionActions:i(),goals:c,isPaused:-1<s.indexOf("paused"),name:a("name"),status:s,startDate:a("startDate"),type:o()}})),H=Object(c.withSelect)((function(e){var t=e("nab/conversion-actions").getConversionActionTypes;return{conversionActionTypes:Object(d.keyBy)(t(),"name")}})),W=Object(c.withDispatch)((function(e,t){var n=t.isPaused,r=e("nab/editor"),i=r.setDraftStatusRationale,a=r.setExperimentData;return{onStatusUpdate:function(e,t){n&&(e="draft"===e?"paused_draft":"paused"),a({status:e}),i(t)},setTestedElementAsInvalid:r.setTestedElementAsInvalid}})),X=Object(I.compose)(F,H,W)(U),z=(n(230),Object(c.withSelect)((function(e){var t=e("nab/experiments").getExperimentTypes,n=e("nab/editor"),r=n.getExperimentType,i=n.getExperimentAttribute,a=n.isExperimentBeingSaved,o=n.hasExperimentBeenRecentlySaved,c=t()[r()],s=i("status");return{Icon:c&&c.icon,startDate:i("startDate"),status:s,isExperimentBeingSaved:a(),hasExperimentBeenRecentlySaved:o(),isPaused:-1!==s.indexOf("paused"),isDraft:["draft","paused_draft"].includes(s)}}))),$=Object(c.withDispatch)((function(e,t){var n=t.isPaused,r=e("nab/editor"),i=r.saveExperiment,a=r.setExperimentData;return{saveExperiment:i,saveExperimentAsReady:function(){a({status:n?"paused":"ready"}),i()}}})),Q=Object(c.withDispatch)((function(e,t){var n=t.isPaused,r=e("nab/editor"),i=r.resumeExperiment,a=r.setExperimentData,o=r.saveExperiment,c=r.startExperiment;return{startOrScheduleExperiment:function(e){n?i():e&&Object(N.isInTheFuture)(e)?(a({status:"scheduled"}),o()):c()}}})),Y=Object(I.compose)(z,$,Q)((function(e){var t=e.Icon,n=e.status,r=e.startDate,i=e.saveExperiment,a=e.saveExperimentAsReady,c=e.startOrScheduleExperiment,s=e.isDraft,l=e.isExperimentBeingSaved,u=e.isPaused,b=e.hasExperimentBeenRecentlySaved,p=Object(P._x)("Start…","command","nelio-ab-testing");return u?p=Object(P._x)("Resume…","command","nelio-ab-testing"):r&&Object(N.isInTheFuture)(r)&&(p="scheduled"===n?Object(P._x)("Schedule","command","nelio-ab-testing"):Object(P._x)("Schedule…","command","nelio-ab-testing")),Object(o.createElement)("div",{className:"nab-edit-experiment-header"},Object(o.createElement)("div",{className:"nab-edit-experiment-header__info"},Object(o.createElement)(t,{className:"nab-edit-experiment-header__experiment-icon"}),Object(o.createElement)("h1",{className:"nab-edit-experiment-header__title"},Object(P._x)("Edit Test","text","nelio-ab-testing"))),Object(o.createElement)("div",{className:"nab-edit-experiment-header__settings"},l&&Object(o.createElement)("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--is-saving"},Object(o.createElement)(S.Dashicon,{icon:"cloud"}),Object(P._x)("Saving…","text","nelio-ab-testing")),b&&"scheduled"!==n&&Object(o.createElement)("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--has-been-saved"},Object(o.createElement)(S.Dashicon,{icon:"yes"}),Object(P._x)("Saved","text (experiment)","nelio-ab-testing")),!l&&!(b&&"scheduled"!==n)&&Object(o.createElement)(S.Button,{isTertiary:!0,className:"nab-edit-experiment-header__save-button",onClick:"scheduled"===n?a:i},"scheduled"===n?Object(P._x)("Save as Ready","command (experiment)","nelio-ab-testing"):Object(P._x)("Save","command","nelio-ab-testing")),Object(o.createElement)(S.Button,{isPrimary:!0,disabled:s||l||b&&"scheduled"===n,className:"nab-edit-experiment-header__start-button",onClick:function(){return c(r)}},p)))})),q=n(123),J=(n(231),Object(c.withSelect)((function(e){return{name:(0,e("nab/editor").getExperimentAttribute)("name")}}))),K=Object(c.withDispatch)((function(e){var t=e("nab/editor").setExperimentData;return{onUpdateName:function(e){return t({name:e})}}})),Z=Object(I.compose)(J,K)((function(e){var t=e.name,n=e.onUpdateName;return Object(o.createElement)("div",{className:"nab-experiment-title"},Object(o.createElement)(q.PlainText,{value:t,className:"nab-experiment-title__edit",placeholder:Object(P._x)("Name your test…","user","nelio-ab-testing"),onChange:n}))})),ee=n(18),te=n.n(ee),ne=(n(232),n(17)),re=n.n(ne);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe,ce,se=function(e){function t(){return f()(this,t),j()(this,x()(t).apply(this,arguments))}return E()(t,e),O()(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.alternative}},{key:"render",value:function(){var e=this.props,t=e.alternative,n=e.disabled,r=e.index,i=this.props,a=i.AlternativeView,c=i.canBeRemoved,s=i.experimentType,l=i.help,u=i.onEditAlternative,b=i.removeAlternatives,d=i.updateAlternative;return Object(o.createElement)("div",{className:re()(["nab-alternative-list__alternative",{"nab-alternative-list__alternative--original":!r}])},Object(o.createElement)("p",{className:re()(["nab-alternative-list__alternative-letter",{"nab-alternative-list__alternative-letter--disabled":0<r&&n}])},function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e>=t.length?e-t.length+1:t.charAt(e)}(r)),Object(o.createElement)("div",{className:"nab-alternative-list__alternative-edit"},Object(o.createElement)(a,{attributes:t.attributes,disabled:n,experimentType:s,setAttributes:function(e){return d(t.id,ae({},t,{attributes:ae({},t.attributes,{},e)}))}}),0!==r&&Object(o.createElement)("ul",{className:"nab-alternative-list__alternative-actions"},!!u&&Object(o.createElement)("li",null,Object(o.createElement)(S.Button,{isLink:!0,disabled:n,onClick:u},Object(P._x)("Edit","command","nelio-ab-testing"))),c&&Object(o.createElement)("li",null,Object(o.createElement)(S.Button,{isLink:!0,isDestructive:!0,disabled:n,onClick:function(){return b(t.id)}},Object(P._x)("Delete","command","nelio-ab-testing"))))),Object(o.createElement)("div",{className:"nab-alternative-list__alternative-help"},!!l&&Object(o.createElement)(p.HelpIcon,{text:l})))}}]),t}(o.Component),le=Object(c.withSelect)((function(e){return{experimentType:(0,e("nab/editor").getExperimentType)()}})),ue=Object(c.withSelect)((function(e,t){var n=t.alternativeId,r=e("nab/editor"),i=r.getAlternative,a=r.getAlternativeIds,o=-1!==((0,r.getExperimentAttribute)("status")||"").indexOf("paused");return{alternative:i(n),canBeRemoved:a().length>2&&!o}})),be=Object(c.withSelect)((function(e,t){var n=t.index,r=e("nab/experiments").getExperimentView,i=e("nab/editor").getExperimentType;return{AlternativeView:r(i(),n?"alternative":"original")}})),pe=Object(c.withDispatch)((function(e,t,n){var r,i=t.alternative,a=n.select,o=e("nab/editor"),c=o.saveExperimentAndEditAlternative,s=o.removeAlternatives,l=o.updateAlternative,u=a("nab/editor").getExperimentType;switch((0,a("nab/experiments").getExperimentSupport)(u(),"alternativeEdition")){case"external":r=function(){return c(i.id)}}return ae({removeAlternatives:s,updateAlternative:l},r&&{onEditAlternative:r})})),de=Object(c.withSelect)((function(e,t){var n=t.index,r=e("nab/editor").getExperimentType,i=e("nab/experiments").getHelpString;return 0===n?{help:i(r(),"original")}:1===n?{help:i(r(),"alternative")}:void 0})),me=Object(I.compose)(le,ue,be,pe,de)(se),fe=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getExperimentAttribute,r=t.isTestedElementInvalid,i=-1!==(n("status")||"").indexOf("paused");return{isTestedElementInvalid:r(),isExperimentPaused:i}})),ve=Object(c.withSelect)((function(e){return{subscription:(0,e("nab/data").getPluginSetting)("subscription")}})),Oe=Object(c.withSelect)((function(e){return{alternativeIds:(0,e("nab/editor").getAlternativeIds)()}})),ge=Object(c.withDispatch)((function(e){var t=e("nab/editor").addAlternatives;return{addAlternative:function(){return t(Object(_.createAlternative)())}}})),je=Object(I.compose)(fe,Oe,ve,ge)((function(e){var t=e.alternativeIds,n=e.addAlternative,r=e.isExperimentPaused,i=e.subscription,a=e.isTestedElementInvalid;return Object(o.createElement)("div",{className:"nab-edit-experiment__alternative-section"},Object(o.createElement)("h2",null,te()({mixedString:Object(P.sprintf)(Object(P._x)("%s Control Version and Variants","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:Object(o.createElement)(S.Dashicon,{className:"nab-alternative-section__title-icon",icon:"randomize"})}})),Object(o.createElement)(p.AnimatedList,{className:"nab-alternative-list",exit:500},t.map((function(e,t){return Object(o.createElement)(me,{key:e,index:t,alternativeId:e,disabled:a})}))),Object(o.createElement)("div",{className:"nab-edit-experiment-alternative-section__new-variant-container"},!r&&!!i&&Object(o.createElement)(S.Button,{isDefault:!0,key:"new-variant",disabled:8<=t.length||a,onClick:function(){return n()}},Object(P._x)("New Variant","command","nelio-ab-testing")),!r&&!i&&Object(o.createElement)(S.ExternalLink,{className:"button",href:Object(_.addFreeTracker)(Object(P._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},Object(P._x)("Subscribe to Add More Variants","user","nelio-ab-testing"))))}));n(233),n(234),n(110);function he(e){return[e]}function xe(){var e={clear:function(){e.head=null}};return e}function ye(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}oe={},ce="undefined"!=typeof WeakMap;var Ee=function(e,t){var n,r;function i(){n=ce?new WeakMap:xe()}function a(){var n,i,a,o,c,s=arguments.length;for(o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];for(c=t.apply(null,o),(n=r(c)).isUniqueByDependants||(n.lastDependants&&!ye(c,n.lastDependants,0)&&n.clear(),n.lastDependants=c),i=n.head;i;){if(ye(i.args,o,1))return i!==n.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=n.head,i.prev=null,n.head.prev=i,n.head=i),i.val;i=i.next}return i={val:e.apply(null,o)},o[0]=null,i.args=o,n.head&&(n.head.prev=i,i.next=n.head),n.head=i,i.val}return t||(t=he),r=ce?function(e){var t,r,i,a,o,c=n,s=!0;for(t=0;t<e.length;t++){if(r=e[t],!(o=r)||"object"!=typeof o){s=!1;break}c.has(r)?c=c.get(r):(i=new WeakMap,c.set(r,i),c=i)}return c.has(oe)||((a=xe()).isUniqueByDependants=s,c.set(oe,a)),c.get(oe)}:function(){return n},a.getDependants=t,a.clear=i,i(),a},_e=Ee((function(e){var t=e("nab/editor"),n=t.getAlternative,r=t.getExperimentType;return(0,e("nab/experiments").getExperimentSupport)(r(),"automaticGoalSetup")(n("control").attributes)}),(function(e){return[e("nab/editor").getAlternative("control")]})),Ae=(n(235),function(e){function t(){return f()(this,t),j()(this,x()(t).apply(this,arguments))}return E()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.Edit,n=e.Icon,r=e.View,i=e.attributes,a=e.experimentId,c=e.goalId,s=e.goalIndex,l=e.readOnly,u=void 0!==l&&l,b=e.remove,p=e.setAttributes,m=e.validate;if(u)return Object(o.createElement)("div",{className:"nab-conversion-action"},Object(o.createElement)("div",{className:"nab-conversion-action__view"},n?Object(o.createElement)(n,{className:"nab-conversion-action__icon"}):Object(o.createElement)(S.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),Object(o.createElement)("div",{className:"nab-conversion-action__actual-view"},r?Object(o.createElement)(r,{attributes:i,experimentId:a,goalId:c,goalIndex:s}):Object(o.createElement)("span",null,Object(P._x)("Invalid conversion action.","text","nelio-ab-testing")))));var f=m(i);return Object(o.createElement)(S.PanelBody,{className:"nab-conversion-action",initialOpen:!Object(d.isEmpty)(f),title:Object(o.createElement)("div",{className:"nab-conversion-action__view"},n?Object(o.createElement)(n,{className:"nab-conversion-action__icon"}):Object(o.createElement)(S.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),Object(o.createElement)("div",{className:"nab-conversion-action__actual-view"},r?Object(o.createElement)(r,{attributes:i,experimentId:a,goalId:c,goalIndex:s}):Object(o.createElement)("span",null,Object(P._x)("Invalid conversion action.","text","nelio-ab-testing"))))},Object(o.createElement)("div",{className:"nab-conversion-action__edit"},t?Object(o.createElement)(t,{attributes:i,experimentId:a,goalId:c,goalIndex:s,setAttributes:p,errors:f}):Object(o.createElement)("span",null,Object(P._x)("This conversion action can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),Object(o.createElement)(S.Button,{isLink:!0,isDestructive:!0,onClick:b,className:"nab-conversion-action__delete-button"},Object(P._x)("Delete","command","neli-ab-testing")))}}]),t}(o.Component)),we=Object(c.withSelect)((function(e,t){var n=t.action,r=e("nab/conversion-actions").getConversionActionType,i=e("nab/editor"),a=i.getExperimentId,o=i.getActiveGoalIndex,c=r(n.type);return{View:c&&c.view,Edit:c&&c.edit,Icon:c&&c.icon,attributes:n.attributes,validate:c?c.validate:function(){},experimentId:a(),goalIndex:o()}})),Se=Object(c.withDispatch)((function(e,t){var n=e("nab/editor"),r=n.updateConversionAction,i=n.removeConversionActionsFromGoal,a=t.goalId,o=t.action;return{setAttributes:function(e){return a&&o&&o.id&&r(a,o.id,e)},remove:function(){return a&&o&&o.id&&i(a,o.id)}}})),Ie=Object(I.compose)(we,Se)(Ae),Pe=function(e){function t(){var e;return f()(this,t),(e=j()(this,x()(t).apply(this,arguments))).updateConversionActions(),e}return E()(t,e),O()(t,[{key:"componentDidUpdate",value:function(e){this.props.autoConversionActions!==e.autoConversionActions&&this.updateConversionActions()}},{key:"updateConversionActions",value:function(){var e=this.props,t=e.autoConversionActions,n=e.goalId;(0,e.replaceConversionActionsInGoal)(n,t)}},{key:"render",value:function(){var e=this.props,t=e.goalId,n=e.conversionActions;return Object(o.createElement)("div",{className:"nab-conversion-action-list nab-conversion-action-list--automatic"},1===n.length?Object(o.createElement)("p",{key:"converison-action-explanation",className:"nab-conversion-action-list__help"},Object(P._x)("Split tests are usually run with some specific goals in mind. In this type of test, there’s a new conversion when the following conversion action occurs after the visitor has seen the tested element:","text","nelio-ab-testing")):Object(o.createElement)("p",{key:"converison-action-explanation",className:"nab-conversion-action-list__help"},Object(P._x)("Split tests are usually run with some specific goals in mind. In this type of test, there’s a new conversion when at least one of the following conversion actions occurs after the visitor has seen the tested element:","text","nelio-ab-testing")),n.map((function(e){return Object(o.createElement)(Ie,{key:e.id,goalId:t,action:e,className:"nab-conversion-action nab-conversion-action--automatic",readOnly:!0})})))}}]),t}(o.Component),De=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getActiveGoal,r=t.getConversionActions,i=n();if(!i)return{conversionActions:[]};var a=r(i.id);return{goalId:i.id,conversionActions:a}})),Te=Object(c.withSelect)((function(e){return{autoConversionActions:_e(e)}})),Ne=Object(c.withDispatch)((function(e){return{replaceConversionActionsInGoal:e("nab/editor").replaceConversionActionsInGoal}})),ke=Object(I.compose)(De,Te,Ne)(Pe),Re=function(e){function t(){return f()(this,t),j()(this,x()(t).apply(this,arguments))}return E()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.goalId,n=e.conversionActions;return Object(o.createElement)("div",{className:"nab-conversion-action-list"},!!n.length&&Object(o.createElement)("p",{key:"converison-action-explanation-1"},Object(P._x)("After a visitor has seen the tested element, there’s a new conversion every time one of the following conversion actions occurs:","text","nelio-ab-testing")),n.map((function(e){return Object(o.createElement)(Ie,{key:e.id,goalId:t,action:e,className:"nab-conversion-action"})})),!n.length&&[Object(o.createElement)("p",{key:"converison-action-explanation-1",className:"nab-conversion-action-list__help"},Object(P._x)("Split tests are usually run with some specific goals in mind, such as “getting more subscribers” or “showing interest in your products.” Goals are fulfilled when the visitor performs certain actions. For instance, a visitor might be “showing interest in your products” when they visit your pricing page or they submit a certain form in your website.","text","nelio-ab-testing")),Object(o.createElement)("p",{key:"converison-action-explanation-2",className:"nab-conversion-action-list__help"},te()({mixedString:Object(P._x)("Use the buttons below to {{strong}}add the specific conversion actions{{/strong}} that fulfill this goal.","user","nelio-ab-testing"),components:{strong:Object(o.createElement)("strong",null)}}))])}}]),t}(o.Component),Ce=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getActiveGoal,r=t.getConversionActions,i=n();if(!i)return{conversionActions:[]};var a=r(i.id);return{goalId:i.id,conversionActions:a}})),Ge=Object(c.withDispatch)((function(e,t){var n=e("nab/editor").updateGoal,r=t.goal;return{updateActiveGoal:function(e){return r&&r.id&&n(r.id,e)}}})),Be=Object(I.compose)(Ce,Ge)(Re),Le=n(37),Ve=(n(236),Object(c.withSelect)((function(e){var t=e("nab/conversion-actions").getConversionActionTypes,n=e("nab/editor").getActiveGoal,r=t()||[];return{conversionActionTypes:r=r.filter((function(t){return!t.isActive||t.isActive(e)})),activeGoal:n()}}))),Ue=Object(c.withDispatch)((function(e,t){var n=e("nab/editor").addConversionActionsIntoGoal,r=t.activeGoal.id;return{createConversionAction:function(e){return n(r,Object(Le.createConversionAction)(e))}}})),Me=Object(c.withSelect)((function(e){if(e("nab/data").getPluginSetting("subscription"))return{isLimitedToFreeUser:!1};var t=e("nab/editor"),n=t.getActiveGoal,r=t.getConversionActions,i=n();return{isLimitedToFreeUser:!!(i?r(i.id):[]).length}})),Fe=Object(I.compose)(Ve,Ue,Me)((function(e){var t=e.createConversionAction,n=e.conversionActionTypes;return e.isLimitedToFreeUser?Object(o.createElement)("div",{className:"nab-conversion-action-type-list"},Object(o.createElement)(S.ExternalLink,{className:"button",href:Object(_.addFreeTracker)(Object(P._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},Object(P._x)("Subscribe to Track More Actions","user","nelio-ab-testing"))):Object(o.createElement)("ul",{className:"nab-conversion-action-type-list"},n&&n.map((function(e){var n=e.icon;return Object(o.createElement)("li",{key:e.name,className:"nab-conversion-action-type-list__item"},Object(o.createElement)(S.Button,{isDefault:!0,title:e.title,className:"nab-conversion-action-type-list__new-action-button",onClick:function(){return t(e.name)}},Object(o.createElement)(n,null)))})))})),He=function(e){var t=e.name,n=void 0===t?"":t,r=e.setName,i=e.removeGoal,a=e.isAutomatic;return Object(o.createElement)("div",{className:"nab-current-goal-info"},!a&&Object(o.createElement)("div",{className:"nab-current-goal-info__header"},Object(o.createElement)(S.TextControl,{placeholder:Object(P._x)("Name your goal…","user","nelio-ab-testing"),value:n,onChange:function(e){return r(e)}}),!!i&&Object(o.createElement)(S.Button,{isDefault:!0,className:"nab-current-goal-info__delete-button",onClick:i},Object(P._x)("Delete","command (goal)","nelio-ab-testing"))),a?Object(o.createElement)(ke,null):Object(o.createElement)(o.Fragment,null,Object(o.createElement)(Be,null),Object(o.createElement)(Fe,null)))},We=(n(237),Object(c.withSelect)((function(e){var t=e("nab/data").getPluginSetting,n=e("nab/editor"),r=n.getActiveGoal,i=n.getGoals,a=n.getExperimentAttribute,o=r(),c=i(),s=-1!==(a("status")||"").indexOf("paused"),l=!!t("subscription");return{activeGoalId:o&&o.id,goals:c,isExperimentPaused:s,isSubscribed:l}}))),Xe=Object(c.withDispatch)((function(e){var t=e("nab/editor"),n=t.setActiveGoal;return{addGoals:t.addGoals,setActiveGoal:n}})),ze=Object(I.compose)(We,Xe)((function(e){var t=e.activeGoalId,n=e.addGoals,r=e.goals,i=e.isExperimentPaused,a=e.isSubscribed,c=e.setActiveGoal,s=e.single;return Object(o.createElement)("ul",{className:"nab-goal-list"},r.map((function(e,n){return Object(o.createElement)("li",{key:e.id,className:re()("nab-goal-list__item",{"nab-goal-list__item--is-active":e.id===t})},Object(o.createElement)(S.Button,{disabled:e.id===t,onClick:function(){return c(e.id)}},Object(d.trim)(e.attributes.name)||function(e){return e?Object(P.sprintf)(Object(P._x)("Goal %d","text","nelio-ab-testing"),e+1):Object(P._x)("Default Goal","text","nelio-ab-testing")}(n)))})),!s&&!i&&a&&Object(o.createElement)("li",{className:"nab-goal-list__add-new-goal",key:"add-new-goal"},Object(o.createElement)(S.Button,{className:"nab-goal-list__add-new-goal-button",isLink:!0,onClick:function(){var e=Object(_.createGoal)();n(e),c(e.id)}},Object(o.createElement)(S.Dashicon,{icon:"plus"}),Object(o.createElement)("span",null,Object(P._x)("New","command (goal)","nelio-ab-testing")))))}));function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qe=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getActiveGoal,r=t.getGoals,i=t.getExperimentAttribute,a=t.getExperimentType,o=e("nab/experiments").hasExperimentSupport,c=r(),s=-1!==(i("status")||"").indexOf("paused");return{goal:n(),goals:c,isExperimentPaused:s,numberOfGoals:c.length,experimentUsesAutomaticGoalSetup:o(a(),"automaticGoalSetup")}})),Ye=Object(c.withDispatch)((function(e,t){var n=e("nab/editor"),r=n.removeGoals,i=n.setActiveGoal,a=n.updateGoal,o=t.goal,c=t.goals;return{removeActiveGoal:function(){var e=function(e,t){var n=Object(d.findIndex)(e,{id:t});if(n===e.length-1)return e[n-1];return e[n+1]}(c,o.id);i(e.id),r(o.id)},updateActiveGoal:function(e){return o&&o.id&&a(o.id,{attributes:e})}}})),qe=Object(I.compose)(Qe,Ye)((function(e){var t=e.experimentUsesAutomaticGoalSetup,n=e.goal,r=void 0===n?{}:n,i=e.isExperimentPaused,a=e.numberOfGoals,c=e.removeActiveGoal,s=e.updateActiveGoal,l=1<a&&!i;return Object(o.createElement)("div",{className:"nab-edit-experiment__goal-section"},Object(o.createElement)("h2",null,te()({mixedString:Object(P.sprintf)(Object(P._x)("%s Conversion Goals and Actions","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:Object(o.createElement)(S.Dashicon,{className:"nab-goal-section__title-icon",icon:"flag"})}})),Object(o.createElement)("div",{className:"nab-edit-experiment-goal-section__content"},Object(o.createElement)(ze,{single:t}),Object(o.createElement)(He,{name:r.attributes.name,setName:function(e){return s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.attributes,{name:e}))},removeGoal:l?c:void 0,isAutomatic:t})))}));n(238),n(239),n(240);var Je=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getDraftStatusRationale,r=(0,t.getExperimentAttribute)("status");return{rationale:n(),isDraft:["draft","paused_draft"].includes(r),status:r}}))((function(e){var t=e.isDraft,n=e.rationale,r=e.status;return Object(o.createElement)(S.PanelRow,{className:"nab-experiment-management__status"},Object(o.createElement)("span",null,Object(P._x)("Status","text","nelio-ab-testing")),Object(o.createElement)("strong",{className:"nab-experiment-management__status-value"},function(e){switch(e){case"ready":return Object(P._x)("Ready","text (experiment status)","nelio-ab-testing");case"scheduled":return Object(P._x)("Scheduled","text (experiment status)","nelio-ab-testing");case"paused_draft":return Object(P._x)("Paused Draft","text (experiment status)","nelio-ab-testing");case"paused":return Object(P._x)("Paused","text (experiment status)","nelio-ab-testing");default:return Object(P._x)("Draft","text (experiment status)","nelio-ab-testing")}}(r),t&&!!n&&Object(o.createElement)("span",{className:"nab-experiment-management__draft-status-info"},Object(o.createElement)(p.HelpIcon,{type:"info",text:n,tooltipPlacement:"left"}))))})),Ke=Object(c.withSelect)((function(e){var t=e("nab/editor").getExperimentAttribute,n=t("startDate"),r=t("status")||"";return{canBeScheduled:(0,e("nab/data").isSubscribedTo)("professional"),isPaused:-1!==r.indexOf("paused"),startDate:n}})),Ze=Object(c.withDispatch)((function(e){var t=e("nab/editor").setExperimentData;return{onUpdateStartDate:function(e){return t({startDate:e})}}})),et=Object(I.compose)(Ke,Ze)((function(e){var t=e.startDate,n=e.isPaused,r=e.canBeScheduled,i=e.onUpdateStartDate;return Object(o.createElement)(S.PanelRow,{className:"nab-experiment-start-schedule"},Object(o.createElement)("span",null,Object(P._x)("Start","text","nelio-ab-testing")),Object(o.createElement)("span",null,!!n&&Object(o.createElement)("span",{className:"nab-experiment-start-schedule__date"},Object(_.formatI18nDatetime)(t)),!n&&!r&&Object(o.createElement)("span",{className:"nab-experiment-start-schedule__date"},Object(P._x)("Immediately","text","nelio-ab-testing")),!n&&!!r&&Object(o.createElement)(p.DateTimePicker,{className:"nab-experiment-start-schedule__date",date:t,onChange:i,noDateLabel:Object(P._x)("Immediately","text","nelio-ab-testing"),readonly:!0})))})),tt=n(32),nt=(n(241),{confidence:[95,96,97,98,99].map((function(e){return{value:e,label:Object(P.sprintf)(Object(P._x)("%s%%","text","nelio-ab-testing"),Object(tt.numberFormat)(e))}})),duration:[5,7,15,30,60,90].map((function(e){return{value:e,label:Object(P.sprintf)(Object(P._n)("%d day","%d days",e,"nelio-ab-testing"),e)}})),"page-views":[2500,5e3,1e4,2e4,5e4,1e5].map((function(e){return{value:e,label:Object(tt.numberFormat)(e)}}))});var rt=Object(c.withSelect)((function(e){var t=e("nab/editor"),n=t.getExperimentAttribute,r=t.getExperimentType,i=n("endMode"),a=n("endValue"),o=r(),c=nt[i];return{canBeScheduled:(0,e("nab/data").isSubscribedTo)("professional"),endMode:i,endValue:a,experimentType:o,options:c}})),it=Object(c.withDispatch)((function(e){var t=e("nab/editor").setExperimentData;return{onUpdateEndSchedule:function(e,n){return t({endMode:e,endValue:n})}}})),at=Object(I.compose)(rt,it,I.withInstanceId)((function(e){var t=e.endMode,n=e.endValue,r=e.experimentType,i=e.options,a=e.onUpdateEndSchedule,c=e.canBeScheduled,s=e.instanceId;return c?Object(o.createElement)(S.PanelRow,{className:"nab-experiment-end-schedule"},Object(o.createElement)("span",null,Object(P._x)("End","text","nelio-ab-testing")),Object(o.createElement)(S.Dropdown,{position:"bottom left",contentClassName:"nab-experiment-end-schedule__dropdown",renderToggle:function(e){var r=e.onToggle,i=e.isOpen;return Object(o.createElement)(o.Fragment,null,Object(o.createElement)("label",{className:"nab-experiment-end-schedule__value screen-reader-text",htmlFor:"nab-experiment-end-schedule__toggle-".concat(s)},Object(P._x)("Click to change","command","nelio-ab-testing")),Object(o.createElement)(S.Button,{id:"nab-experiment-end-schedule__toggle-".concat(s),type:"button",className:"nab-experiment-end-schedule__toggle",onClick:r,"aria-expanded":i,"aria-live":"polite",isLink:!0},function(e,t){switch(e){case"duration":return Object(P.sprintf)(Object(P._n)("After %d day","After %d days",t,"nelio-ab-testing"),t);case"page-views":return Object(P.sprintf)(Object(P._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),Object(tt.numberFormat)(t));case"confidence":return Object(P.sprintf)(Object(P._x)("At %s%% confidence","text","nelio-ab-testing"),Object(tt.numberFormat)(t));default:return Object(P._x)("Manual","text","nelio-ab-testing")}}(t,n)))},renderContent:function(){return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(S.SelectControl,{label:Object(P._x)("End Mode","text","nelio-ab-testing"),value:t,onChange:function(e){return a(e,function(e){switch(e){case"duration":return 5;case"page-views":return 5e3;case"confidence":return 97}}(e))},options:[{value:"manual",label:Object(P._x)("Manual","text","nelio-ab-testing")},{value:"duration",label:Object(P._x)("Duration","text","nelio-ab-testing")},{value:"page-views",label:Object(P._x)("Page Views","text","nelio-ab-testing")},{value:"confidence",label:Object(P._x)("Confidence","text","nelio-ab-testing")}].filter((function(e){return"confidence"!==e.value||"nab/heatmap"!==r}))}),!!i&&Object(o.createElement)(S.SelectControl,{label:Object(P._x)("Value","text","nelio-ab-testing"),onChange:function(e){return a(t,e)},value:n,options:i}))}})):Object(o.createElement)(S.PanelRow,{className:"nab-experiment-end-schedule"},Object(o.createElement)("span",null,Object(P._x)("End","text","nelio-ab-testing")),Object(o.createElement)("span",null,Object(P._x)("Manual","text","nelio-ab-testing")))})),ot=Object(c.withDispatch)((function(e){return{moveToTrash:e("nab/editor").moveToTrash}}))((function(e){var t=e.moveToTrash;return Object(o.createElement)(S.PanelBody,{className:"nab-experiment-management",title:Object(P._x)("Status & Management","text (experiment)","nelio-ab-testing")},Object(o.createElement)(Je,null),Object(o.createElement)(et,null),Object(o.createElement)(at,null),Object(o.createElement)(S.PanelRow,{className:"nab-experiment-management__trash"},Object(o.createElement)(S.Button,{isDefault:!0,isLarge:!0,onClick:t},Object(P._x)("Move to Trash","command (experiment)","nelio-ab-testing"))))})),ct=Object(c.withSelect)((function(e){return{description:(0,e("nab/editor").getExperimentAttribute)("description")}})),st=Object(c.withDispatch)((function(e){var t=e("nab/editor").setExperimentData;return{onUpdateDescription:function(e){return t({description:e})}}})),lt=Object(I.compose)(ct,st)((function(e){var t=e.description,n=e.onUpdateDescription;return Object(o.createElement)(S.PanelBody,{className:"nab-experiment-description",title:Object(P._x)("Description","text","nelio-ab-testing")},Object(o.createElement)(S.TextareaControl,{label:Object(P._x)("Describe your test (optional)","user","nelio-ab-testing"),className:"nab-experiment-description__textarea",value:t,onChange:function(e){return n(e)}}))})),ut=(n(242),Object(I.withState)({type:"partial",value:""})),bt=Object(c.withDispatch)((function(e,t){var n=t.rules,r=t.scopeSupport,i=t.type,a=t.value,o=t.setState,c=e("nab/editor").addScopeRules;return{addRule:function(){return o({value:""},(function(){"custom-with-tested-post"!==r||n.length?c([Object(_.createScopeRule)({type:i,value:a})]):c([Object(_.createScopeRule)({type:"tested-post"}),Object(_.createScopeRule)({type:i,value:a})])}))}}})),pt=Object(I.compose)(ut,bt)((function(e){var t=e.addRule,n=e.setState,r=e.type,i=e.value,a=[{value:"partial",label:Object(P._x)("URL contains the expected value","text","nelio-ab-testing")},{value:"exact",label:Object(P._x)("URL exactly matches the expected value","text","nelio-ab-testing")}];return Object(o.createElement)("div",{className:"nab-experiment-scope__new-rule-form"},Object(o.createElement)(S.SelectControl,{className:"nab-experiment-scope__new-rule-mode",label:Object(P._x)("Select URL matching mode","user","nelio-ab-testing"),value:r,options:a,onChange:function(e){return n({type:e})}}),Object(o.createElement)(S.TextControl,{className:"nab-experiment-scope__new-rule-value",label:Object(P._x)("Write a URL","user","nelio-ab-testing"),value:i,onChange:function(e){return n({value:e})}}),Object(o.createElement)(p.ErrorText,{value:i&&Object(_.isUrlFragmentInvalid)(i)}),Object(o.createElement)(S.PanelRow,{className:"nab-experiment-scope__add-rule-action-container"},Object(o.createElement)(S.Button,{isDefault:!0,onClick:t,disabled:Object(d.isEmpty)(Object(d.trim)(i)),className:"nab-experiment-scope__add-rule-action"},Object(P._x)("Add","command","nelio-ab-testing"))))})),dt=Object(c.withDispatch)((function(e,t){var n=t.rules,r=t.scopeSupport,i=e("nab/editor").removeScopeRules;return{removeScopeRule:function(e){"custom-with-tested-post"===r&&2===n.length?i(Object(d.map)(n,"id")):i(e)}}})),mt=Object(I.compose)(dt)((function(e){var t=e.rules,n=e.removeScopeRule,r=e.scopeSupport;return t.length?Object(o.createElement)(o.Fragment,null,Object(o.createElement)("p",null,"custom-with-tested-post"===r?Object(P._x)("Variants will be visible only on pages matching the following criteria, as well as on the tested element’s page.","text","nelio-ab-testing"):Object(P._x)("Variants will be visible only on pages matching the following criteria:","text","nelio-ab-testing")),Object(o.createElement)("ul",{className:"nab-experiment-scope__rule-list"},t.filter((function(e){return"tested-post"!==e.attributes.type})).map((function(e){var t=e.id,r=e.attributes,i=r.value,a=r.type;return Object(o.createElement)("li",{key:t,className:"nab-experiment-scope__rule-list-item"},Object(o.createElement)("span",{className:"nab-experiment-scope__active-rule-type"},"exact"===a&&Object(P._x)("URL is:","text","nelio-ab-testing"),"partial"===a&&Object(P._x)("URL contains:","text","nelio-ab-testing")),Object(o.createElement)("input",{type:"text",className:"nab-experiment-scope__active-rule-value",value:i,readOnly:!0}),Object(o.createElement)(S.Button,{isLink:!0,isDestructive:!0,className:"nab-experiment-scope__remove-rule-action",onClick:function(){return n(t)}},Object(P._x)("Delete","command","nelio-ab-testing")))})))):Object(o.createElement)("p",null,"custom-with-tested-post"===r?Object(P._x)("Variants will be visible on all the pages of your website, including that of the tested element.","user","nelio-ab-testing"):Object(P._x)("Variants will be visible on all the pages of your website.","user","nelio-ab-testing")," ",Object(P._x)("If you wish to limit its scope to certain pages only, use the following form to define the URLs in which the test should run.","user","nelio-ab-testing"))})),ft=Object(c.withDispatch)((function(e,t){var n=t.rules,r=e("nab/editor"),i=r.addScopeRules,a=r.removeScopeRules;return{enableConsistency:function(e){a(Object(d.map)(n,"id")),e&&i(Object(_.createScopeRule)({type:"tested-post"}))}}})),vt=Object(I.compose)(ft)((function(e){var t=e.rules,n=e.enableConsistency;return Object(o.createElement)(o.Fragment,null,t.length?Object(o.createElement)("p",null,Object(P._x)("Variants will be visible only on the tested element’s page.","text","nelio-ab-testing")):Object(o.createElement)("p",null,Object(P._x)("Variants will be visible on the tested element’s page. All other pages will also show the appropriate variant of this test whenever the tested element appears on them.","text","nelio-ab-testing")),Object(o.createElement)(S.CheckboxControl,{label:Object(P._x)("Global Consistency","command","nelio-ab-testing"),checked:!t.length,onChange:function(){return n(!t.length)}}))})),Ot=Object(I.ifCondition)((function(e){return!!e.scopeSupport})),gt=Object(c.withSelect)((function(e){return{rules:(0,e("nab/editor").getScope)()}})),jt=Object(c.withSelect)((function(e){return{scopeSupport:(0,e("nab/experiments").getExperimentSupport)((0,e("nab/editor").getExperimentType)(),"scope")}})),ht=Object(I.compose)(gt,jt,Ot)((function(e){var t=e.rules,n=e.scopeSupport;return Object(o.createElement)(S.PanelBody,{className:"nab-experiment-scope",title:Object(P._x)("Test Scope","text","nelio-ab-testing")},"tested-post-with-consistency"===n?Object(o.createElement)(vt,{rules:t}):Object(o.createElement)(o.Fragment,null,Object(o.createElement)(mt,{rules:t,scopeSupport:n}),Object(o.createElement)(pt,{rules:t,scopeSupport:n})))})),xt=Object(c.withSelect)((function(e){var t=(0,e("nab/data").getPageAttribute)("sidebarDimensions",{top:0,height:"100vh",applyFix:!0});if(t.applyFix)return t}))((function(e){var t=e.top,n=e.height;return Object(o.createElement)("div",{className:"nab-edit-experiment-sidebar",style:{top:t,height:n}},Object(o.createElement)("div",{className:"nab-edit-experiment-sidebar__element-wrapper"},Object(o.createElement)("h2",{className:"nab-edit-experiment-sidebar__section-title"},te()({mixedString:Object(P.sprintf)(Object(P._x)("%s Additional Settings","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:Object(o.createElement)(S.Dashicon,{className:"nab-edit-experiment-sidebar__section-title-icon",icon:"admin-settings"})}})),Object(o.createElement)(ot,null),Object(o.createElement)(lt,null),Object(o.createElement)(ht,null)))})),yt=Object(I.compose)(Object(c.withSelect)((function(e){return{notices:e("core/notices").getNotices()}})),Object(c.withDispatch)((function(e){return{onRemove:e("core/notices").removeNotice}})))((function(e){var t=e.notices,n=e.onRemove;return Object(o.createElement)("div",{className:"nab-edit-experiment-layout"},Object(o.createElement)(X,null),Object(o.createElement)(Y,null),Object(o.createElement)("div",{className:"nab-edit-experiment-layout__body"},Object(o.createElement)("div",{className:"nab-edit-experiment-layout__content",role:"region","aria-label":Object(P._x)("Editor content","text","nelio-ab-testing"),tabIndex:"-1"},!Object(d.isEmpty)(t)&&Object(o.createElement)(S.NoticeList,{className:"nab-edit-experiment-layout__notices",notices:t,onRemove:n}),Object(o.createElement)(Z,null),Object(o.createElement)(je,null),Object(o.createElement)(qe,null)),Object(o.createElement)(xt,null)))})),Et=function(e){function t(){return f()(this,t),j()(this,x()(t).apply(this,arguments))}return E()(t,e),O()(t,[{key:"render",value:function(){var e=this.props.experiment;return e?Object(o.createElement)(o.StrictMode,null,Object(o.createElement)(w,{experiment:e},Object(o.createElement)(yt,null))):null}}]),t}(o.Component),_t=Object(c.withSelect)((function(e,t){var n=t.experimentId;return{experiment:(0,e("nab/data").getExperiment)(n)}}))(Et),At=n(7);function wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SET_ACTIVE_GOAL"!==t.type?e:t.goalId?t.goalId:e}function St(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_EXPERIMENT_AS_BEING_SAVED"!==t.type?e:!!t.status}function It(e,t){return"SET_EXPERIMENT_AS_HAVING_BEEN_RECENTLY_SAVED"===t.type}function Pt(e,t){return"SET_RATIONALE_FOR_DRAFT_STATUS"!==t.type?e:t.rationale}var Dt=n(27),Tt=n.n(Dt);function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ft=Object(c.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{experiment:Object(c.combineReducers)({alternatives:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALTERNATIVES":return{byId:kt({},e.byId,{},Object(d.keyBy)(t.alternatives,"id")),allIds:[].concat(Tt()(e.allIds),Tt()(Object(d.map)(t.alternatives,"id")))};case"REMOVE_ALTERNATIVES":return{byId:Object(d.omit)(e.byId,t.ids),allIds:Object(d.difference)(e.allIds,t.ids)};case"UPDATE_ALTERNATIVE":return!t.alternative||Object(d.isEmpty)(t.alternative)?e:Object(d.isEmpty)(e.byId[t.id])?e:kt({},e,{byId:kt({},e.byId,T()({},t.id,kt({},e[t.id],{},t.alternative)))});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{byId:[],allIds:[]}:{byId:Object(d.keyBy)(t.experiment.alternatives,"id"),allIds:Object(d.map)(t.experiment.alternatives,"id")}}return e},conversionActions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case"ADD_CONVERSION_ACTIONS_INTO_GOAL":return Ct({},e,T()({},t.goalId,Ct({},e[t.goalId],{},Object(d.keyBy)(t.conversionActions,"id"))));case"REPLACE_CONVERSION_ACTIONS_IN_GOAL":return Ct({},e,T()({},t.goalId,Ct({},Object(d.keyBy)(t.conversionActions,"id"))));case"UPDATE_CONVERSION_ACTION":return Ct({},e,T()({},t.goalId,Ct({},e[t.goalId],T()({},t.conversionActionId,Ct({},e[t.goalId][t.conversionActionId],{attributes:Ct({},e[t.goalId][t.conversionActionId].attributes,{},t.attributes)})))));case"REMOVE_CONVERSION_ACTIONS_FROM_GOAL":return Ct({},e,T()({},t.goalId,Object(d.omit)(e[t.goalId],t.conversionActionIds)));case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:t.experiment.goals.reduce((function(e,t){return e[t.id]=Object(d.keyBy)(t.conversionActions,"id"),e}),{})}return e},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EXPERIMENT_DATA":return Bt({},e,{},t.attributes);case"SETUP_EDITOR":return Bt({},e,{},Object(d.omit)(t.experiment,["alternatives","goals","scope"]));case"SET_TESTED_ELEMENT_AS_INVALID":return Bt({},e,{isTestedElementInvalid:!0===t.invalid})}return e},goals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case"ADD_GOALS":return Vt({},e,{},Object(d.keyBy)(t.goals,"id"));case"UPDATE_GOAL":return e[t.goalId]?Vt({},e,T()({},t.goalId,Vt({},e[t.goalId],{},t.attributes))):e;case"REMOVE_GOALS":return Object(d.omit)(e,t.ids);case"SETUP_EDITOR":if("nab/heatmap"===t.experiment.type)return{};var n=t.experiment.goals.map((function(e){return Object(d.omit)(e,"conversionActions")}));return Object(d.keyBy)(n,"id")}return e},scope:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case"ADD_SCOPE_RULES":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},Object(d.keyBy)(t.rules,"id"));case"REMOVE_SCOPE_RULES":return Object(d.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:Object(d.keyBy)(t.experiment.scope,"id")}return e}})})),Ht=function(e,t){return e.experiment.alternatives.byId[t]},Wt=function(e){return e.experiment.alternatives.allIds},Xt=Ee((function(e,t){return Object(d.values)(e.experiment.conversionActions[t])}),(function(e,t){return[e.experiment.conversionActions,t]}));function zt(e){return!!e.isExperimentBeingSaved}function $t(e){return!!e.hasExperimentBeenRecentlySaved}function Qt(e){return Object(d.filter)(e.experiment.goals,{id:e.activeGoalId})[0]}function Yt(e){return Object(d.map)(e.experiment.goals,"id").indexOf(e.activeGoalId)}function qt(e){if(e.experiment&&e.experiment.data&&["draft","paused_draft"].includes(e.experiment.data.status))return e.draftStatusRationale}function Jt(e){return e.experiment.data.id}function Kt(e){return e.experiment.data.type}function Zt(e,t){return e.experiment.data[t]}function en(e){return!!e.experiment.data.isTestedElementInvalid}var tn=Ee((function(e){return Object(d.values)(e.experiment.goals)}),(function(e){return[e.experiment.goals]})),nn=Ee((function(e){return Object(d.values)(e.experiment.scope)}),(function(e){return[e.experiment.scope]}));function rn(e){return{type:"ADD_ALTERNATIVES",alternatives:Object(d.castArray)(e)}}function an(e){return{type:"REMOVE_ALTERNATIVES",ids:Object(d.castArray)(e)}}function on(e,t){return{type:"UPDATE_ALTERNATIVE",id:e,alternative:t}}function cn(e,t){return{type:"ADD_CONVERSION_ACTIONS_INTO_GOAL",goalId:e,conversionActions:Object(d.castArray)(t)}}function sn(e,t){return{type:"REPLACE_CONVERSION_ACTIONS_IN_GOAL",goalId:e,conversionActions:Object(d.castArray)(t)}}function ln(e,t){return{type:"REMOVE_CONVERSION_ACTIONS_FROM_GOAL",goalId:e,conversionActionIds:Object(d.castArray)(t)}}function un(e,t,n){return{type:"UPDATE_CONVERSION_ACTION",goalId:e,conversionActionId:t,attributes:n}}var bn=n(8),pn=n.n(bn),dn=n(23),mn=pn.a.mark(Sn),fn=pn.a.mark(In),vn=pn.a.mark(Pn),On=pn.a.mark(Dn),gn=pn.a.mark(Tn),jn=pn.a.mark(Nn);function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e){return{type:"SETUP_EDITOR",experiment:e}}function En(e){return{type:"SET_ACTIVE_GOAL",goalId:e}}function _n(e){return{type:"SET_EXPERIMENT_AS_BEING_SAVED",status:e}}function An(e){return{type:"SET_RATIONALE_FOR_DRAFT_STATUS",rationale:e}}function wn(){return{type:"SET_EXPERIMENT_AS_HAVING_BEEN_RECENTLY_SAVED"}}function Sn(){var e,t,n,r,i,a,o,c,s,l,u,b,p,m,f,v,O,g,j,h;return pn.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Object(At.select)("nab/editor","isExperimentBeingSaved");case 2:if(!x.sent){x.next=4;break}return x.abrupt("return");case 4:return x.next=6,Object(At.dispatch)("nab/editor","setExperimentAsBeingSaved",!0);case 6:return e=[],x.next=9,Object(At.select)("nab/editor","getGoals");case 9:t=x.sent,n=!0,r=!1,i=void 0,x.prev=13,a=t[Symbol.iterator]();case 15:if(n=(o=a.next()).done){x.next=30;break}return c=o.value,x.t0=e,x.t1=xn,x.t2={},x.t3=c,x.next=23,Object(At.select)("nab/editor","getConversionActions",c.id);case 23:x.t4=x.sent,x.t5={conversionActions:x.t4},x.t6=(0,x.t1)(x.t2,x.t3,x.t5),x.t0.push.call(x.t0,x.t6);case 27:n=!0,x.next=15;break;case 30:x.next=36;break;case 32:x.prev=32,x.t7=x.catch(13),r=!0,i=x.t7;case 36:x.prev=36,x.prev=37,n||null==a.return||a.return();case 39:if(x.prev=39,!r){x.next=42;break}throw i;case 42:return x.finish(39);case 43:return x.finish(36);case 44:return s=[],x.next=47,Object(At.select)("nab/editor","getAlternativeIds");case 47:return l=x.sent,x.next=50,Object(At.select)("nab/editor","isTestedElementInvalid");case 50:return u=x.sent,x.next=53,Object(At.select)("nab/editor","getAlternative","control");case 53:b=x.sent,p=!0,m=!1,f=void 0,x.prev=57,v=l[Symbol.iterator]();case 59:if(p=(O=v.next()).done){x.next=71;break}if("control"!==(g=O.value)){x.next=63;break}return x.abrupt("continue",68);case 63:return x.t8=s,x.next=66,Object(At.select)("nab/editor","getAlternative",g);case 66:x.t9=x.sent,x.t8.push.call(x.t8,x.t9);case 68:p=!0,x.next=59;break;case 71:x.next=77;break;case 73:x.prev=73,x.t10=x.catch(57),m=!0,f=x.t10;case 77:x.prev=77,x.prev=78,p||null==v.return||v.return();case 80:if(x.prev=80,!m){x.next=83;break}throw f;case 83:return x.finish(80);case 84:return x.finish(77);case 85:return x.next=87,Object(At.select)("nab/editor","getExperimentId");case 87:return x.t11=x.sent,x.next=90,Object(At.select)("nab/editor","getExperimentType");case 90:return x.t12=x.sent,x.next=93,Object(At.select)("nab/editor","getExperimentAttribute","name");case 93:return x.t13=x.sent,x.next=96,Object(At.select)("nab/editor","getExperimentAttribute","description");case 96:return x.t14=x.sent,x.next=99,Object(At.select)("nab/editor","getExperimentAttribute","status");case 99:return x.t15=x.sent,x.next=102,Object(At.select)("nab/editor","getExperimentAttribute","startDate");case 102:return x.t16=x.sent,x.next=105,Object(At.select)("nab/editor","getExperimentAttribute","endMode");case 105:return x.t17=x.sent,x.next=108,Object(At.select)("nab/editor","getExperimentAttribute","endValue");case 108:return x.t18=x.sent,x.next=111,Object(At.select)("nab/editor","getScope");case 111:if(x.t19=x.sent,x.t20=u?[b]:[b].concat(s),x.t21=e,"nab/heatmap"!==(j={id:x.t11,type:x.t12,name:x.t13,description:x.t14,status:x.t15,startDate:x.t16,endMode:x.t17,endValue:x.t18,scope:x.t19,alternatives:x.t20,goals:x.t21}).type){x.next=136;break}return x.t22=xn,x.t23={},x.t24=j,x.next=121,Object(At.select)("nab/editor","getExperimentAttribute","trackingMode");case 121:return x.t25=x.sent,x.next=124,Object(At.select)("nab/editor","getExperimentAttribute","trackedPostId");case 124:return x.t26=x.sent,x.next=127,Object(At.select)("nab/editor","getExperimentAttribute","trackedPostType");case 127:return x.t27=x.sent,x.next=130,Object(At.select)("nab/editor","getExperimentAttribute","trackedUrl");case 130:x.t28=x.sent,x.t29={trackingMode:x.t25,trackedPostId:x.t26,trackedPostType:x.t27,trackedUrl:x.t28},delete(j=(0,x.t22)(x.t23,x.t24,x.t29)).scope,delete j.alternatives,delete j.goals;case 136:return x.next=138,Object(At.apiFetch)({path:"/nab/v1/experiment/".concat(j.id),method:"PUT",data:j});case 138:return h=x.sent,"nab/heatmap"!==j.type&&u&&(h.alternatives=[h.alternatives[0]].concat(Tt()(Object(d.difference)(s,b)))),x.next=142,Object(At.dispatch)("nab/editor","setupEditor",h);case 142:return x.next=144,Object(At.dispatch)("nab/editor","setExperimentAsBeingSaved",!1);case 144:return x.next=146,Object(At.dispatch)("nab/editor","setExperimentAsRecentlySaved");case 146:case"end":return x.stop()}}),mn,null,[[13,32,36,44],[37,,39,43],[57,73,77,85],[78,,80,84]])}function In(e){var t;return pn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Sn();case 2:return n.next=4,Object(At.select)("nab/editor","getAlternativeIds");case 4:if(n.sent.includes(e)){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,Object(At.select)("nab/editor","getAlternative",e);case 9:if(t=n.sent){n.next=12;break}return n.abrupt("return");case 12:if(t.links.edit){n.next=14;break}return n.abrupt("return");case 14:window.location.href=t.links.edit;case 15:case"end":return n.stop()}}),fn)}function Pn(){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.dispatch)("nab/editor","setExperimentData",{status:"trash"});case 2:return e.next=4,Sn();case 4:window.location=Object(dn.addQueryArgs)("edit.php",{post_type:"nab_experiment"});case 5:case"end":return e.stop()}}),vn)}function Dn(){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn("start",Object(P._x)("Test can’t be started","text","nelio-ab-testing"));case 2:case"end":return e.stop()}}),On)}function Tn(){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn("resume",Object(P._x)("Test can’t be resumed","text","nelio-ab-testing"));case 2:case"end":return e.stop()}}),gn)}function Nn(e,t){var n,r,i;return pn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Sn();case 2:return a.next=4,Object(At.dispatch)("nab/editor","setExperimentAsBeingSaved",!0);case 4:return a.next=6,Object(At.select)("nab/editor","getExperimentId");case 6:return n=a.sent,a.prev=7,a.next=10,Object(At.apiFetch)({path:"/nab/v1/experiment/".concat(n,"/").concat(e),method:"PUT"});case 10:a.next=21;break;case 12:return a.prev=12,a.t0=a.catch(7),r=a.t0.errors?Object(d.values)(a.t0.errors):[],i=r[0]||t||Object(P._x)("Unknown error","text","nelio-ab-testing"),a.next=18,Object(At.dispatch)("core/notices","createErrorNotice",i);case 18:return a.next=20,Object(At.dispatch)("nab/editor","setExperimentAsBeingSaved",!1);case 20:return a.abrupt("return");case 21:window.location=Object(dn.addQueryArgs)("admin.php",{page:"nelio-ab-testing-experiment-view",experiment:n});case 22:case"end":return a.stop()}}),jn,null,[[7,12]])}function kn(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function Rn(e){return{type:"SET_TESTED_ELEMENT_AS_INVALID",invalid:e}}function Cn(e){return{type:"ADD_GOALS",goals:Object(d.castArray)(e)}}function Gn(e){return{type:"REMOVE_GOALS",ids:Object(d.castArray)(e)}}function Bn(e,t){return{type:"UPDATE_GOAL",goalId:e,attributes:t}}function Ln(e){return{type:"ADD_SCOPE_RULES",rules:Object(d.castArray)(e)}}function Vn(e){return{type:"REMOVE_SCOPE_RULES",ids:Object(d.castArray)(e)}}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(n,!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t,n){var r=document.getElementById(e);Object(u.registerCoreExperiments)(),Object(b.registerCoreConversionActions)();var i=n.help,a=n.siteId,c=n.subscription;l()((function(){return Object(p.appendContextualHelp)("experiment-list",i,{siteId:a,subscription:c})})),Object(o.render)(Object(o.createElement)(_t,{experimentId:t}),r)}function Hn(){var e=window.innerHeight,t=document.getElementById("wpadminbar"),n=t?t.getBoundingClientRect().height:0;(0,Object(c.dispatch)("nab/data").setPageAttribute)("sidebarDimensions",{top:n,height:e-n,applyFix:782<=window.innerWidth})}Object(c.registerStore)("nab/editor",{reducer:Ft,controls:At.controls,actions:Mn({},a),selectors:Mn({},i)}),n.d(t,"initializeExperimentEditor",(function(){return Fn})),n.d(t,"EditorProvider",(function(){return w})),n.d(t,"ExperimentName",(function(){return Z})),n.d(t,"Header",(function(){return Y})),n.d(t,"Sidebar",(function(){return xt})),window.addEventListener("resize",Object(d.debounce)(Hn,100)),l()(Hn)},27:function(e,t,n){var r=n(46),i=n(47),a=n(48);e.exports=function(e){return r(e)||i(e)||a()}},31:function(e,t){!function(){e.exports=this.wp.domReady}()},32:function(e,t){!function(){e.exports=this.nab.i18n}()},33:function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},34:function(e,t){!function(){e.exports=this.wp.hooks}()},36:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},37:function(e,t){!function(){e.exports=this.nab.conversionActions}()},4:function(e,t){!function(){e.exports=this.React}()},43:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},46:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},47:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},48:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},49:function(e,t,n){"use strict";var r=n(4),i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,a=n(33),o=n(50),c=n(51),s=".",l=":",u="function"==typeof Symbol&&Symbol.iterator,b="@@iterator";function p(e,t){return e&&"object"==typeof e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function d(e,t,n,r){var a,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===i)return n(r,e,""===t?s+p(e,0):t),1;var m=0,f=""===t?s:t+l;if(Array.isArray(e))for(var v=0;v<e.length;v++)m+=d(a=e[v],f+p(a,v),n,r);else{var O=function(e){var t=e&&(u&&e[u]||e[b]);if("function"==typeof t)return t}(e);if(O){0;for(var g,j=O.call(e),h=0;!(g=j.next()).done;)m+=d(a=g.value,f+p(a,h++),n,r)}else if("object"===c){0;var x=""+e;o(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===x?"object with keys {"+Object.keys(e).join(", ")+"}":x,"")}}return m}var m=/\/+/g;function f(e){return(""+e).replace(m,"$&/")}var v,O,g=j,j=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},h=function(e){o(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function x(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function y(e,t,n){var i,o,c=e.result,s=e.keyPrefix,l=e.func,u=e.context,b=l.call(u,t,e.count++);Array.isArray(b)?E(b,c,n,a.thatReturnsArgument):null!=b&&(r.isValidElement(b)&&(i=b,o=s+(!b.key||t&&t.key===b.key?"":f(b.key)+"/")+n,b=r.cloneElement(i,{key:o},void 0!==i.props?i.props.children:void 0)),c.push(b))}function E(e,t,n,r,i){var a="";null!=n&&(a=f(n)+"/");var o=x.getPooled(t,a,r,i);!function(e,t,n){null==e||d(e,"",t,n)}(e,y,o),x.release(o)}x.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},v=function(e,t,n,r){if(this.instancePool.length){var i=this.instancePool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)},(O=x).instancePool=[],O.getPooled=v||g,O.poolSize||(O.poolSize=10),O.release=h;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(r.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;o(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)E(e[n],t,n,a.thatReturnsArgument);return t}},5:function(e,t){!function(){e.exports=this.wp.data}()},50:function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,a,o,c,s){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,a,o,c,s],b=0;(l=new Error(t.replace(/%s/g,(function(){return u[b++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},51:function(e,t,n){"use strict";var r=n(33);e.exports=r},52:function(e,t,n){"use strict";function r(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(r)}},6:function(e,t){!function(){e.exports=this.wp.components}()},64:function(e,t){!function(){e.exports=this.nab.experimentLibrary}()},65:function(e,t){!function(){e.exports=this.nab.conversionActionLibrary}()},7:function(e,t){!function(){e.exports=this.wp.dataControls}()},8:function(e,t){!function(){e.exports=this.regeneratorRuntime}()},9:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}});