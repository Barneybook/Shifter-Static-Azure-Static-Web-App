!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=234)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},10:function(e,t){!function(){e.exports=this.React}()},11:function(e,t){!function(){e.exports=this.nab.components}()},12:function(e,t){!function(){e.exports=this.lodash}()},14:function(e,t){!function(){e.exports=this.nab.utils}()},16:function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var c=i.apply(null,r);c&&e.push(c)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},179:function(e,t,n){var r=n(10);function i(e){return r.createElement("svg",e,r.createElement("path",{d:"m 64.278145,7.1081826 c -4.418483,0 -8.718625,0.4995089 -12.850225,1.4463434 0.279211,0.9371415 0.57731,2.036491 0.969089,3.426602 0.538351,1.705235 0.940815,2.919841 1.207746,3.637327 l 8.566783,28.35465 c 2.648836,-0.117468 5.34938,-0.246743 7.541598,-0.307543 1.704775,-0.09268 3.418524,-0.154068 5.168162,-0.19834 1.749696,-0.0484 3.0768,-0.08087 3.974286,-0.125733 0.941994,-0.04447 1.982272,-0.06907 3.103834,-0.06907 6.99897,0 12.680477,0.927414 17.077401,2.76654 4.441671,1.839481 7.609261,4.280473 9.493661,7.33095 1.88441,3.005966 2.83691,6.297668 2.83691,9.88688 0,2.781475 -0.61438,5.436332 -1.82579,7.948808 -1.16648,2.467614 -2.64317,4.508208 -4.43785,6.123146 -1.65991,1.570129 -3.50022,2.796055 -5.519262,3.693541 -2.019106,0.85221 -4.259457,1.641732 -6.726959,2.359236 7.133535,0.449216 13.116401,2.489927 17.962081,6.123146 1.26311,0.947248 2.36656,1.976193 3.30041,3.103481 4.72844,-8.330827 7.42926,-17.963341 7.42926,-28.227829 0,-31.631643 -25.639383,-57.2709881 -57.271023,-57.271028 z M 38.5497,13.203258 c -0.11747,0.05666 -0.234349,0.109382 -0.351817,0.170005 L 25.881404,47.921205 H 48.772982 L 38.548985,13.204588 Z m -7.499458,4.522101 C 16.491677,28.109691 6.9930834,45.135935 6.9930834,64.379213 c 0,6.055876 0.9545075,11.893214 2.6965894,17.372243 0.9811902,-5.753438 2.8195492,-11.702155 4.7609142,-17.807651 0.02091,-0.06435 0.05666,-0.161741 0.085,-0.238479 0.003,-0.03869 0.01088,-0.07261 0.01403,-0.113337 L 29.5906,22.008037 c 0.262682,-0.733308 0.787868,-2.25489 1.46051,-4.283401 z m 48.549842,30.517393 c -2.557398,0 -5.074006,0.222542 -7.541625,0.674236 v 32.708229 h 6.319752 c 6.415809,0 10.921984,-1.488018 13.524304,-4.494041 2.646828,-3.005964 3.974286,-7.038724 3.974286,-12.063743 0,-4.57627 -1.276457,-8.532775 -3.833914,-11.85302 -2.557398,-3.319824 -6.700115,-4.971532 -12.442849,-4.971532 z M 24.94114,53.43898 c -7.251315,21.80001 6.581964,28.467756 4.971543,41.008168 -0.684348,5.331776 -4.131717,7.946962 -7.990949,8.482512 8.495971,9.32824 20.035372,15.83448 33.045288,17.96216 0.367755,-0.16174 0.682324,-0.34415 0.940755,-0.56196 0.897487,-0.71751 1.448764,-1.99444 1.671247,-3.83392 0.266813,-1.83706 0.406714,-4.79031 0.407304,-8.81958 V 85.613453 C 57.868859,81.828063 57.783857,78.444303 56.231024,72.622856 55.826671,70.96253 55.189977,68.64615 54.292846,65.685173 L 50.599305,53.438885 H 24.941074 Z m 47.117319,33.157599 v 0.01403 33.845801 c 0.762837,0.0445 1.588307,0.10921 2.485852,0.19834 0.08914,0.004 0.230806,0.009 0.323482,0.014 10.262354,-1.91799 19.556408,-6.56811 27.104757,-13.17318 0.14581,-1.02934 0.23848,-2.10805 0.23848,-3.25837 0,-2.73703 -0.61437,-5.428419 -1.82578,-8.075208 -1.166233,-2.692254 -3.432419,-4.971938 -6.797007,-6.811439 -3.320244,-1.839892 -7.913744,-2.752798 -13.791137,-2.752798 h -7.738205 z",style:{fill:"#000",opacity:"0.2"}}))}i.defaultProps={viewBox:"0 0 128 128"},e.exports=i,i.default=i},18:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},192:function(e,t,n){},193:function(e,t,n){},2:function(e,t){!function(){e.exports=this.wp.components}()},21:function(e,t,n){var r=n(35),i=n(36),o=n(37);e.exports=function(e){return r(e)||i(e)||o()}},22:function(e,t){!function(){e.exports=this.wp.domReady}()},234:function(e,t,n){"use strict";n.r(t);var r=n(21),i=n.n(r),o=n(0),c=n(3),s=n(1),u=n(22),a=n.n(u),p=(n(26),n(33)),l=n(11),f=n(14),b=n(12),m=(n(192),n(2)),y=Object(c.withSelect)((function(e){return{notices:e("core/notices").getNotices()}}))((function(e){var t=e.notices;return Object(o.createElement)(m.NoticeList,{notices:t})})),d=n(24),x=n.n(d),O=n(5),j=n.n(O),h=n(6),g=n.n(h),v=n(7),E=n.n(v),w=n(8),S=n.n(w),_=n(18),P=n.n(_),T=n(9),A=n.n(T),k=n(78),N=n.n(k),q=n(4),M=n(16),V=n.n(M);n(193);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var B=function(e){function t(){var e;return j()(this,t),(e=E()(this,S()(t).apply(this,arguments))).toggleVisible=e.toggleVisible.bind(P()(e)),e.createExperiment=e.createExperiment.bind(P()(e)),e}return A()(t,e),g()(t,[{key:"createExperiment",value:function(e){var t=this.props,n=t.experimentTypes;(0,t.setState)((function(){return{isWaiting:!0,selectedExperiment:e}}));var r=!1,i=Object(b.find)(n,{name:e});i&&!Object(b.isEmpty)(i.supports)&&(r="tested-post-with-consistency"===i.supports.scope),N()({path:"/nab/v1/experiment",method:"post",data:{type:e,addTestedPostScopeRule:r}}).then((function(e){window.location.href=e.edit}))}},{key:"toggleVisible",value:function(){var e=this.props,t=e.isVisible;(0,e.setState)((function(){return{isVisible:!t}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.experimentTypes,r=t.isSubscribed,i=t.isVisible,c=t.isWaiting,u=t.postTypes,a=t.selectedExperiment;return Object(o.createElement)("span",{className:"nab-experiment-selector__container"},Object(o.createElement)(m.Button,{className:"page-title-action",onClick:this.toggleVisible,style:{height:"auto"}},Object(s._x)("Add Test","command","nelio-ab-testing")),i&&Object(o.createElement)(m.Popover,{className:"nab-new-experiment-dialog",position:"bottom right",onFocusOutside:this.toggleVisible},Object(o.createElement)("ul",{className:"nab-experiment-type-list"},n.map((function(t,n){var i=t.name,p=t.title,l=t.description,y=t.icon,d=!1;(function(e){return!Object(b.isEmpty)(e.supports.postTypes)||!Object(b.isEmpty)(e.supports.postTypeExceptions)})(t)&&!function(e,t){if(e.supports.postTypes){var n=Object(b.castArray)(e.supports.postTypes);return!!Object(b.find)(t,(function(e){return n.includes(e.name)}))}if(e.supports.postTypeExceptions){var r=Object(b.castArray)(e.supports.postTypeExceptions);return!!Object(b.find)(t,(function(e){return!r.includes(e.name)}))}return!1}(t,u)&&(d=!0),D(t)&&!function(e){var t=e._presetAlternatives;if(!t)return!1;return 0<Object(b.keys)(t).reduce((function(e,n){return Math.max(e,t[n].length)}),0)}(t)&&(d=!0);var x=!r&&!["nab/page","nab/heatmap"].includes(i);return Object(o.createElement)("li",{key:n,className:V()("nab-experiment-type-list__experiment-type",{"nab-experiment-type-list__experiment-type--is-creating":c&&a===i,"nab-experiment-type-list__experiment-type--is-disabled":d,"nab-experiment-type-list__experiment-type--is-pro":x})},x?Object(o.createElement)(o.Fragment,null,Object(o.createElement)(m.ExternalLink,{href:Object(f.addFreeTracker)(Object(s._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},Object(o.createElement)(y,{className:"nab-experiment-type-list__experiment-icon"})),Object(o.createElement)("span",null,p)):Object(o.createElement)(m.Button,{title:l,disabled:c||d,onClick:function(){return e.createExperiment(i)}},Object(o.createElement)(y,{className:"nab-experiment-type-list__experiment-icon"}),Object(o.createElement)("span",null,p)))})))))}}]),t}(o.Component);function D(e){return Object(b.isFunction)(e.supports.presetAlternatives)}var L=Object(q.withState)({isVisible:!1,isWaiting:!1,selectedExperiment:!1}),R=Object(c.withSelect)((function(e){return{isSubscribed:!!e("nab/data").getPluginSetting("subscription")}})),F=Object(c.withSelect)((function(e){var t=e("nab/data").getKindEntities,n=e("nab/experiments").getExperimentTypes,r=Object(b.map)(Object(b.values)(n()),(function(t){return D(t)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{_presetAlternatives:t.supports.presetAlternatives(e)}):t})),i=t()||[];return{experimentTypes:r,postTypes:i=i.filter((function(e){return"entity"===e.kind}))}})),z=Object(q.compose)(R,L,F)(B),Q=function(e){function t(){return j()(this,t),E()(this,S()(t).apply(this,arguments))}return A()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.quota,n=e.quotaPerMonth,r=e.quotaExtra;return Object(o.createElement)(l.QuotaMeter,{quota:t,quotaPerMonth:n,quotaExtra:r})}}]),t}(o.Component),H=Object(c.withSelect)((function(e){var t=e("nab/data"),n=t.getQuota,r=t.getQuotaPerMonth,i=t.getQuotaExtra;return{quota:n(),quotaPerMonth:r(),quotaExtra:i()}}))(Q),I=n(179),W=n.n(I);function Z(){i()(document.querySelectorAll(".js-nab-experiment__icon")).map((function(e){var t=e.getAttribute("data-experiment-type"),n=Object(c.select)("nab/experiments").getExperimentType(t),r=n&&n.icon||W.a,i=n&&n.title||Object(s._x)("Unknown","text (experiment type)","nelio-ab-testing");return e.setAttribute("title",i),Object(o.render)(Object(o.createElement)(r,null),e)}))}function K(){var e=document.querySelector(".wp-header-end"),t=document.createElement("div");Object(o.render)(Object(o.createElement)(H,null),t),e.parentNode.insertBefore(t.children[0],e)}window.nab=window.nab||{},window.nab.initPage=function(e,t){Object(p.registerCoreExperiments)(),Object(f.onElementReadyOrDomReadyTops)(".wp-header-end",K),function e(){Z();setTimeout((function(){"complete"!==document.readyState&&e()}),100)}(),a()((function(){return function(e){var t=document.querySelector(".wp-heading-inline"),n=document.createElement("div");Object(o.render)(Object(o.createElement)(z,null),n);var r=document.createElement("span");Object(o.render)(Object(o.createElement)(l.TitleAction,{isSubscribed:!!e.subscription,isDeprecated:e.isDeprecated}),r);var i=document.createElement("div");Object(o.render)(Object(o.createElement)(y,null),i),t.parentNode.insertBefore(i,t.nextSibling),t.parentNode.insertBefore(r,t.nextSibling),t.parentNode.insertBefore(n.children[0],t.nextSibling)}(t)})),t.isStaging&&Object(f.createStagingNotice)();var n=[];Object(c.subscribe)(Object(b.debounce)((function(){var e=Object(b.keys)(Object(c.select)("nab/experiments").getExperimentTypes());Object(b.isEmpty)(Object(b.difference)(e,n))||(n=e,Z())}),0));var r=t.help,i=t.siteId,s=t.subscription;Object(l.appendContextualHelp)("experiment-list",r,{siteId:i,subscription:s})}},24:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},26:function(e,t){!function(){e.exports=this.nab.data}()},29:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},3:function(e,t){!function(){e.exports=this.wp.data}()},30:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},33:function(e,t){!function(){e.exports=this.nab.experimentLibrary}()},35:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},36:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},37:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},4:function(e,t){!function(){e.exports=this.wp.compose}()},5:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},6:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},7:function(e,t,n){var r=n(29),i=n(18);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},78:function(e,t){!function(){e.exports=this.wp.apiFetch}()},8:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},9:function(e,t,n){var r=n(30);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}}});