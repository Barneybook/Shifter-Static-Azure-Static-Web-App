this.nab=this.nab||{},this.nab.heatmapEditor=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=256)}({0:function(e,t){!function(){e.exports=this.wp.i18n}()},1:function(e,t){!function(){e.exports=this.wp.element}()},10:function(e,t){!function(){e.exports=this.wp.compose}()},11:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},12:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},13:function(e,t,n){var r=n(36),o=n(22);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},14:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},15:function(e,t,n){var r=n(43);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},16:function(e,t){!function(){e.exports=this.nab.components}()},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(n(4)),i=c(n(49)),a=c(n(52));function c(e){return e&&e.__esModule?e:{default:e}}var s=void 0;function u(e,t){var n,a,c,l,p,f,d,b,m=[],h={};for(f=0;f<e.length;f++)if("string"!==(p=e[f]).type){if(!t.hasOwnProperty(p.value)||void 0===t[p.value])throw new Error("Invalid interpolation, missing component node: `"+p.value+"`");if("object"!==r(t[p.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+p.value+"`","\n> "+s);if("componentClose"===p.type)throw new Error("Missing opening component token: `"+p.value+"`");if("componentOpen"===p.type){n=t[p.value],c=f;break}m.push(t[p.value])}else m.push(p.value);return n&&(l=function(e,t){var n,r,o=t[e],i=0;for(r=e+1;r<t.length;r++)if((n=t[r]).value===o.value){if("componentOpen"===n.type){i++;continue}if("componentClose"===n.type){if(0===i)return r;i--}}throw new Error("Missing closing component token `"+o.value+"`")}(c,e),d=u(e.slice(c+1,l),t),a=o.default.cloneElement(n,{},d),m.push(a),l<e.length-1&&(b=u(e.slice(l+1),t),m=m.concat(b))),1===m.length?m[0]:(m.forEach((function(e,t){e&&(h["interpolation-child-"+t]=e)})),(0,i.default)(h))}t.default=function(e){var t=e.mixedString,n=e.components,o=e.throwErrors;if(s=t,!n)return t;if("object"!==(void 0===n?"undefined":r(n))){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var i=(0,a.default)(t);try{return u(i,n)}catch(e){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},19:function(e,t){!function(){e.exports=this.nab.utils}()},2:function(e,t){!function(){e.exports=this.lodash}()},21:function(e,t){!function(){e.exports=this.wp.date}()},22:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},248:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(5),i=n(31),a=n.n(i),c=n(54),s=n(64),u=n(65),l=n(2),p=n(11),f=n.n(p),d=n(12),b=n.n(d),m=n(13),h=n.n(m),y=n(14),v=n.n(y),g=n(15),j=n.n(g),x=n(0),O=n(21),E=n(10),_=n(19);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return!!t&&(0===e.indexOf(t)&&!Object(_.isUrlFragmentInvalid)(e.replace(t,"")))}var k=function(e){function t(){var e,n;f()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=h()(this,(e=v()(t)).call.apply(e,[this].concat(o)))).setProperStatus(),n}return j()(t,e),b()(t,[{key:"componentDidUpdate",value:function(){this.setProperStatus()}},{key:"setProperStatus",value:function(){var e=this.props,t=e.homeUrl,n=e.mode,r=e.name,o=e.onStatusUpdate,i=e.postId,a=e.postType,c=e.startDate,s=e.status,u=e.url;if("running"!==s)if(Object(l.isEmpty)(r))o("draft",Object(x._x)("Please name your Heatmap test","user","nelio-ab-testing"));else{if("post"===n&&!i)switch(a){case"product":return void o("draft",Object(x._x)("Please select the product to track","user","nelio-ab-testing"));case"post":return void o("draft",Object(x._x)("Please select the post to track","user","nelio-ab-testing"));case"page":return void o("draft",Object(x._x)("Please select the page to track","user","nelio-ab-testing"));default:return void o("draft",Object(x._x)("Please select a page to track","user","nelio-ab-testing"))}"url"!==n||w(u,t)?"ready"!==s&&("scheduled"!==s||Object(O.isInTheFuture)(c)?"scheduled"!==s&&o("ready"):o("ready")):o("draft",Object(x._x)("Please type in a valid URL to track","user","nelio-ab-testing"))}}},{key:"render",value:function(){return null}}]),t}(r.Component),P=Object(o.withSelect)((function(e){var t=e("nab/data").getPluginSetting,n=e("nab/editor").getExperimentAttribute;return{homeUrl:t("homeUrl"),mode:n("trackingMode")||"post",name:n("name"),postId:n("trackedPostId")||void 0,postType:n("trackedPostType")||"page",startDate:n("startDate"),status:n("status"),url:n("trackedUrl")||""}})),S=Object(o.withDispatch)((function(e){var t=e("nab/editor"),n=t.setDraftStatusRationale,r=t.setExperimentData;return{onStatusUpdate:function(e,t){r({status:e}),n(t)}}})),T=Object(E.compose)(P,S)(k),I=n(6),R=n(18),N=n.n(R),U=n(16),A=(n(248),Object(o.withSelect)((function(e){var t=e("nab/data").getKindEntities,n=[{kind:"entity",name:"page",labels:{singular_name:Object(x._x)("Page","text","nelio-ab-testing")}},{kind:"entity",name:"post",labels:{singular_name:Object(x._x)("Post","text","nelio-ab-testing")}}],r=t();return{postTypes:r=(r=(r=Object(l.isEmpty)(r)?n:r).filter((function(e){return"entity"===e.kind}))).filter((function(e){return"attachment"!==e.name}))}}))((function(e){var t=e.className,n=e.postId,o=e.postType,i=e.postTypes,a=e.setAttributes,c=i.map((function(e){return{value:e.name,label:e.labels.singular_name}})),s=o||"page";return Object(r.createElement)("div",{className:t},Object(r.createElement)(I.SelectControl,{className:"".concat(t,"-type-selector"),value:s,options:c,onChange:function(e){return a({postId:0,postType:e})}}),Object(r.createElement)(U.PostSearcher,{className:"".concat(t,"-selector"),type:s,value:n,perPage:10,onChange:function(e){return a({postId:e,postType:s})}}))}))),C=Object(o.withSelect)((function(e){var t=e("nab/data").getPluginSetting,n=e("nab/editor").getExperimentAttribute,r=n("trackedUrl")||"",o=t("homeUrl");return{attributes:{homeUrl:o,isUrlValid:w(r,o),mode:n("trackingMode")||"post",postId:n("trackedPostId")||void 0,postType:n("trackedPostType")||"page",url:r}}})),M=Object(o.withDispatch)((function(e,t){var n=t.attributes,r=e("nab/editor").setExperimentData;return{setAttributes:function(e){return r({trackingMode:void 0!==e.mode?e.mode:n.mode,trackedPostId:void 0!==e.postId?e.postId:n.postId,trackedPostType:void 0!==e.postType?e.postType:n.postType,trackedUrl:void 0!==e.url?e.url:n.url})}}})),D=Object(E.compose)(C,M)((function(e){var t=e.attributes,n=t.homeUrl,o=t.isUrlValid,i=t.mode,a=t.postId,c=t.postType,s=t.url,u=e.setAttributes;return Object(r.createElement)("div",{className:"nab-edit-experiment__alternative-section"},Object(r.createElement)("h2",null,N()({mixedString:Object(x.sprintf)(Object(x._x)("%s WordPress Page","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:Object(r.createElement)(I.Dashicon,{className:"nab-alternative-section__title-icon",icon:"welcome-view-site"})}})),Object(r.createElement)("div",{className:"nab-tracked-element"},"url"!==i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"nab-tracked-element__p"},Object(x._x)("Select the page you want to generate a heatmap for:","user","nelio-ab-testing")),Object(r.createElement)(A,{className:"nab-tracked-element__post",postId:a,postType:c,setAttributes:u})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"nab-tracked-element__p"},Object(x._x)("Type in the URL of the page you want to generate a heatmap for:","user","nelio-ab-testing")),Object(r.createElement)("div",{className:"nab-tracked-element__url"},Object(r.createElement)(I.TextControl,{className:"nab-tracked-element__url-value",value:s,onChange:function(e){return u({url:e})},placeholder:Object(x._x)("URL…","text","nelio-ab-testing")}),Object(r.createElement)("div",{className:"nab-tracked-element__url-preview"},Object(r.createElement)(I.ExternalLink,{className:"button",href:o?s:void 0,disabled:!o},Object(x._x)("View","command","nelio-ab-testing")))),!o&&Object(r.createElement)("div",{className:"nab-tracked-element__p"},Object(r.createElement)(U.ErrorText,{value:Object(x.sprintf)(Object(x._x)("URL doesn’t start with your WordPress’ home URL (i.e. “%s”)","text","nelio-ab-testing"),n)}))),Object(r.createElement)("div",{className:"nab-tracked-element__p"},Object(r.createElement)(I.CheckboxControl,{className:"nab-tracked-element__mode",label:Object(x._x)("Track heatmap of a page specified using its URL.","command","nelio-ab-testing"),checked:"url"===i,onChange:function(e){return u({mode:e?"url":"post"})}}))))})),L=function(){return Object(r.createElement)("div",{className:"nab-edit-experiment-layout"},Object(r.createElement)(T,null),Object(r.createElement)(c.Header,null),Object(r.createElement)("div",{className:"nab-edit-experiment-layout__body"},Object(r.createElement)("div",{className:"nab-edit-experiment-layout__content",role:"region","aria-label":Object(x._x)("Editor content","text","nelio-ab-testing"),tabIndex:"-1"},Object(r.createElement)(c.ExperimentName,null),Object(r.createElement)(D,null)),Object(r.createElement)(c.Sidebar,null)))},F=function(e){function t(){return f()(this,t),h()(this,v()(t).apply(this,arguments))}return j()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.experiment;return e?Object(r.createElement)(r.StrictMode,null,Object(r.createElement)(c.EditorProvider,{experiment:e},Object(r.createElement)(L,null))):null}}]),t}(r.Component),V=Object(o.withSelect)((function(e,t){var n=t.experimentId;return{experiment:(0,e("nab/data").getExperiment)(n)}}))(F);function W(e,t){var n=document.getElementById(e);Object(s.registerCoreExperiments)(),Object(u.registerCoreConversionActions)(),Object(r.render)(Object(r.createElement)(V,{experimentId:t}),n)}function z(){var e=window.innerHeight,t=document.getElementById("wpadminbar"),n=t?t.getBoundingClientRect().height:0;(0,Object(o.dispatch)("nab/data").setPageAttribute)("sidebarDimensions",{top:n,height:e-n,applyFix:782<=window.innerWidth})}n.d(t,"initializeExperimentEditor",(function(){return W})),window.addEventListener("resize",Object(l.debounce)(z,100)),a()(z)},31:function(e,t){!function(){e.exports=this.wp.domReady}()},33:function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},36:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},4:function(e,t){!function(){e.exports=this.React}()},43:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},49:function(e,t,n){"use strict";var r=n(4),o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,i=n(33),a=n(50),c=n(51),s=".",u=":",l="function"==typeof Symbol&&Symbol.iterator,p="@@iterator";function f(e,t){return e&&"object"==typeof e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function d(e,t,n,r){var i,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===o)return n(r,e,""===t?s+f(e,0):t),1;var b=0,m=""===t?s:t+u;if(Array.isArray(e))for(var h=0;h<e.length;h++)b+=d(i=e[h],m+f(i,h),n,r);else{var y=function(e){var t=e&&(l&&e[l]||e[p]);if("function"==typeof t)return t}(e);if(y){0;for(var v,g=y.call(e),j=0;!(v=g.next()).done;)b+=d(i=v.value,m+f(i,j++),n,r)}else if("object"===c){0;var x=""+e;a(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===x?"object with keys {"+Object.keys(e).join(", ")+"}":x,"")}}return b}var b=/\/+/g;function m(e){return(""+e).replace(b,"$&/")}var h,y,v=g,g=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},j=function(e){a(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function x(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function O(e,t,n){var o,a,c=e.result,s=e.keyPrefix,u=e.func,l=e.context,p=u.call(l,t,e.count++);Array.isArray(p)?E(p,c,n,i.thatReturnsArgument):null!=p&&(r.isValidElement(p)&&(o=p,a=s+(!p.key||t&&t.key===p.key?"":m(p.key)+"/")+n,p=r.cloneElement(o,{key:a},void 0!==o.props?o.props.children:void 0)),c.push(p))}function E(e,t,n,r,o){var i="";null!=n&&(i=m(n)+"/");var a=x.getPooled(t,i,r,o);!function(e,t,n){null==e||d(e,"",t,n)}(e,O,a),x.release(a)}x.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h=function(e,t,n,r){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)},(y=x).instancePool=[],y.getPooled=h||v,y.poolSize||(y.poolSize=10),y.release=j;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(r.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;a(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)E(e[n],t,n,i.thatReturnsArgument);return t}},5:function(e,t){!function(){e.exports=this.wp.data}()},50:function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,i,a,c,s){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,a,c,s],p=0;(u=new Error(t.replace(/%s/g,(function(){return l[p++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},51:function(e,t,n){"use strict";var r=n(33);e.exports=r},52:function(e,t,n){"use strict";function r(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(r)}},54:function(e,t){!function(){e.exports=this.nab.editor}()},6:function(e,t){!function(){e.exports=this.wp.components}()},64:function(e,t){!function(){e.exports=this.nab.experimentLibrary}()},65:function(e,t){!function(){e.exports=this.nab.conversionActionLibrary}()}});