!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=61)}([,function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e,n){var i=n(11),r=n(12),a=n(13);t.exports=function(t){return i(t)||r(t)||a()}},,function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,,function(t,e){!function(){t.exports=this.wp.url}()},function(t,e){!function(){t.exports=this.wp.apiFetch}()},function(t,e){!function(){t.exports=this.lodash}()},,function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,,,,function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},,,,function(t,e){!function(){t.exports=this.wp.domReady}()},,,,,,function(t,e,n){var i=n(57);t.exports=function(t,e){if(null==t)return{};var n,r,a=i(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},,,,,function(t,e,n){var i=n(54),r=n(55),a=n(56);t.exports=function(t,e){return i(t)||r(t,e)||a()}},function(t,e){!function(){t.exports=this.jQuery}()},,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}},,,,function(t,e,n){"use strict";n.r(e);var i=n(23),r=n.n(i),a=n(2),o=n.n(a),s=n(34),l=n.n(s),u=n(8),c=n.n(u),h=n(1),f=n(7),d=n(35),g=n.n(d),b=(n(18),n(19),window.Node,window.XPathResult);var p=3e4,y=1.2;function v(t,e){var n=document.createElement(t);return n.className="nab-overlay-element",n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.zIndex="999999",m(n,e),n}function m(t,e){var n=document.body.clientWidth,i=x(e);t.style.width="".concat(n,"px"),t.style.height="".concat(i,"px"),"canvas"===t.nodeName.toLowerCase()&&(t.width=n,t.height=i)}function x(t){var e=document.body.clientHeight;switch(t){case"smartphone":return Math.min(e,p*y*y);case"tablet":return Math.min(e,p*y);case"desktop":default:return Math.min(e,p)}}function E(t,e){var n=e[t].width,i=Object.values(e).map((function(t){return t.width})),r=i.reduce((function(t,e){return e<n?Math.max(e,t):t}),-1),a=i.reduce((function(t,e){return n<e?Math.min(e,t):t}),Number.POSITIVE_INFINITY);return Number.POSITIVE_INFINITY!==a&&(a=n),{minWidth:r+1,maxWidth:a}}var _,w=!1,T=!1,A={};function R(t,e,n){if(!w){w=!0,T=!1,_={};var i=n.dispatch;i("nab/data").setPageAttribute("areResultsLoaded",!1),Promise.all([S("clicks",t,e,n),S("scrolls",t,e,n)]).then((function(t){var e=l()(t,2),n=e[0],r=e[1];w=!1,(T={clicks:n,scrolls:r}).clicks.forEach((function(t){var e,n;t.intensity=t.intensity||1,t.country=t.country||Object(h._x)("unknown","text","nelio-ab-testing"),t.hourOfDay=(e=t.hourOfDay,Math.floor(e/2)),t.dayOfWeek=("string"==typeof(n=t.dayOfWeek)&&(n=parseInt(n)),n),t.timeToClick=function(t){"string"==typeof t&&(t=parseInt(t));for(var e=[2,3,4,5,10,15,20,25,30,60,120,180,300],n=0;n<e.length;++n)if(t<=e[n])return n;return e.length}(t.timeToClick),t.windowWidthInPx=t.windowWidth,t.windowWidth=function(t){"string"==typeof t&&(t=parseInt(t));for(var e=[300,600,900,1200,1500,1800,2100],n=0;n<e.length;++n)if(t<e[n])return n;return e.length}(t.windowWidth),t.realCoordinates={},t.isVisibleInResolution={}})),i("nab/data").setPageAttribute("areResultsLoaded",!0),i("nab/data").setPageAttribute("resolutionChangeMode","reset-heights")}))}}function O(){return!T||w?[]:_.desktop&&T.clicks?T.clicks:[]}function F(t){return _[t]}function S(t,e,n,i){var r=i.siteId,a={alternative:n,start:e.startDate,end:e.endDate?e.endDate:void 0,tz:i.timezone};return new Promise((function(n){!function t(e,n,i,r){var a={url:e,method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(n)}};c()(a).then((function(a){var s=a.data,l=a.page;i=[].concat(o()(i),o()(s));var u=Object(f.addQueryArgs)(e,{page:l});l&&e!==u?t(u,n,i,r):r(i)}),(function(){return r(i)}))}(Object(f.addQueryArgs)("https://api.nelioabtesting.com/v1/site/".concat(r,"/experiment/").concat(e.id,"/").concat(t),a),i.awsAuthToken,[],n)}))}function C(t){A[t]=A[t]||{},T.clicks.forEach((function(e){var n=e.x,i=e.y,r=function(t,e){var n=t.xpath||t.cssPath;if(void 0!==A[e][n])return A[e][n];var i=t.xpath?(r=n,document.evaluate(r,document,null,b.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):g()(n)[0];var r;A[e][n]=!!i&&i.getBoundingClientRect();return A[e][n]}(e,t),a=r.top,o=r.left,s=r.width,l=r.height,u=o+n*s,c=a+i*l;e.realCoordinates[t]=e.realCoordinates[t]||{},e.realCoordinates[t].x=u,e.realCoordinates[t].y=c,e.isVisibleInResolution[t]=s>0&&l>0})),_[t]=!0}var I=100,P={original:!1},L={};function M(t,e){var n=e.dispatch;switch(t.type){case"reset-heights":!function(t,e){if(k&&L[t])return e("nab/data").setPageAttribute("iframeContentHeight",x(t)),void e("nab/data").setPageAttribute("resolutionChangeMode","fix-heights");if(P[t])return void e("nab/data").setPageAttribute("resolutionChangeMode","fetch-lazy-load-images");if(!P.original){var n=o()(document.querySelectorAll(".nab-overlay-element, .nab-overlay-element *")),i=o()(document.querySelectorAll("*")).filter((function(t){return!n.includes(t)}));P.original=i.map((function(t){return{el:t,cssHeight:t.style.height,cssMinHeight:t.style.minHeight}}))}P.original.forEach((function(t){var e=t.el,n=t.cssHeight,i=t.cssMinHeight;e.style.height=n,e.style.minHeight=i})),e("nab/data").setPageAttribute("resolutionChangeMode","fetch-lazy-load-images")}(t.activeResolution,n);break;case"fetch-lazy-load-images":!function(t){if(k)return void t("nab/data").setPageAttribute("resolutionChangeMode","calculate-heights-in-double-sized-iframe");var e=o()(document.querySelectorAll("img[data-src]")).reverse();e.forEach((function(t){return t.getAttribute("data-src")&&t.setAttribute("src",t.getAttribute("data-src"))}));var n=e.length?500:0;setTimeout((function(){k=!0,t("nab/data").setPageAttribute("resolutionChangeMode","calculate-heights-in-double-sized-iframe")}),n)}(n);break;case"calculate-heights-in-double-sized-iframe":!function(t,e){if(P[t])return void e("nab/data").setPageAttribute("resolutionChangeMode","calculate-actual-heights");e("nab/data").setPageAttribute("iframeContentHeight",50*window.innerHeight),setTimeout((function(){var n=o()(document.querySelectorAll(".nab-overlay-element, .nab-overlay-element *")),i=o()(document.querySelectorAll("*")).filter((function(t){return!n.includes(t)}));P[t]=i.map((function(t){return{el:t,actualHeight:window.getComputedStyle(t).height}})),e("nab/data").setPageAttribute("resolutionChangeMode","calculate-actual-heights")}),I)}(t.activeResolution,n);break;case"calculate-actual-heights":!function(t,e){if(L[t])return e("nab/data").setPageAttribute("iframeContentHeight",x(t)),void e("nab/data").setPageAttribute("resolutionChangeMode","fix-heights");e("nab/data").setPageAttribute("iframeContentHeight",window.innerHeight/50),setTimeout((function(){P[t].forEach((function(t){var e=window.getComputedStyle(t.el).height;t.didHeightChange=t.actualHeight!==e,t.actualHeight=e})),L[t]=!0,e("nab/data").setPageAttribute("iframeContentHeight",x(t)),e("nab/data").setPageAttribute("resolutionChangeMode","fix-heights")}),I)}(t.activeResolution,n);break;case"fix-heights":!function(t,e){P[t].forEach((function(t){var e=t.el,n=t.actualHeight;t.didHeightChange&&(e.style.height=n,e.style.minHeight=n)})),e("nab/data").setPageAttribute("iframeContentHeight",x(t)),e("nab/data").setPageAttribute("resolutionChangeMode","compute-click-coordinates")}(t.activeResolution,n);break;case"compute-click-coordinates":!function(t,e){if(F(t))return void e("nab/data").setPageAttribute("resolutionChangeMode","none");setTimeout((function(){var n;n=t,!w&&T&&T.clicks&&(_[n]||C(n)),e("nab/data").setPageAttribute("iframeContentHeight",x(t)),e("nab/data").setPageAttribute("resolutionChangeMode","none")}),I)}(t.activeResolution,n);break;case"recompute-click-coordinates":!function(t,e){n=t,!w&&T&&T.clicks&&(_={},A={},C(n)),e("nab/data").setPageAttribute("resolutionChangeMode","none");var n}(t.activeResolution,n)}}var k=!1;var B,N,D,j,U,W,G,H,X,z=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};H=function(){var t,e,n,i,r,a,o,s,l,u,c,h,f,d;if((r=function(){var t,e,n;return(t=document.createElement("canvas")).width=2,t.height=2,(n=(e=t.getContext("2d")).getImageData(0,0,2,2)).data.set(new Uint8ClampedArray([0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255])),e.putImageData(n,0,0),t})(),e=function(t,e){var n,i,a,o,s,l,u,c,h,f,d,g,b,p;if(l=t.createProgram(),b=t.createShader(t.VERTEX_SHADER),t.attachShader(l,b),t.shaderSource(b,"attribute vec2 position;\nvoid main(){\n    gl_Position = vec4(position, 0.0, 1.0);\n}"),t.compileShader(b),!t.getShaderParameter(b,t.COMPILE_STATUS))throw t.getShaderInfoLog(b);if(a=t.createShader(t.FRAGMENT_SHADER),t.attachShader(l,a),t.shaderSource(a,"uniform sampler2D source;\nvoid main(){\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\n}"),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw t.getShaderInfoLog(a);if(t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))throw t.getProgramInfoLog(l);return t.useProgram(l),i=function(){return t.deleteShader(a),t.deleteShader(b),t.deleteProgram(l),t.deleteBuffer(n),t.deleteTexture(h),t.deleteTexture(g),t.deleteFramebuffer(o),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)},g=t.createTexture(),t.bindTexture(t.TEXTURE_2D,g),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),o=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,g,0),f=r(),h=t.createTexture(),t.bindTexture(t.TEXTURE_2D,h),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,e,f),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),p=new Float32Array([1,1,-1,1,-1,-1,1,1,-1,-1,1,-1]),n=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,p,t.STATIC_DRAW),s=t.getAttribLocation(l,"position"),d=t.getUniformLocation(l,"source"),t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.uniform1i(d,0),t.drawArrays(t.TRIANGLES,0,6),u=new Uint8Array(16),t.readPixels(0,0,2,2,t.RGBA,t.UNSIGNED_BYTE,u),c=Math.abs(u[0]-127)<10,i(),c},i=function(t,e){var n;return n=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,e,null),0===t.getError()?(t.deleteTexture(n),!0):(t.deleteTexture(n),!1)},t=function(t,e){var n,i,r;return r=t.createTexture(),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,e,null),i=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),n=t.checkFramebufferStatus(t.FRAMEBUFFER),t.deleteTexture(r),t.deleteFramebuffer(i),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),n===t.FRAMEBUFFER_COMPLETE},l=[],u={},c=[],n=function(){var n,r,a,o,s;n=document.createElement("canvas"),r=null;try{null===(r=n.getContext("experimental-webgl"))&&(r=n.getContext("webgl"))}catch(t){}if(null!=r&&(null===r.getExtension("OES_texture_float")?i(r,r.FLOAT)?(s=!0,l.push("OES_texture_float"),u.OES_texture_float={shim:!0}):(s=!1,c.push("OES_texture_float")):i(r,r.FLOAT)?(s=!0,l.push("OES_texture_float")):(s=!1,c.push("OES_texture_float")),s&&(null===r.getExtension("WEBGL_color_buffer_float")?t(r,r.FLOAT)?(l.push("WEBGL_color_buffer_float"),u.WEBGL_color_buffer_float={shim:!0,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):c.push("WEBGL_color_buffer_float"):t(r,r.FLOAT)?l.push("WEBGL_color_buffer_float"):c.push("WEBGL_color_buffer_float"),null===r.getExtension("OES_texture_float_linear")?e(r,r.FLOAT)?(l.push("OES_texture_float_linear"),u.OES_texture_float_linear={shim:!0}):c.push("OES_texture_float_linear"):e(r,r.FLOAT)?l.push("OES_texture_float_linear"):c.push("OES_texture_float_linear")),null===(a=r.getExtension("OES_texture_half_float"))?i(r,36193)?(o=!0,l.push("OES_texture_half_float"),a=u.OES_texture_half_float={HALF_FLOAT_OES:36193,shim:!0}):(o=!1,c.push("OES_texture_half_float")):i(r,a.HALF_FLOAT_OES)?(o=!0,l.push("OES_texture_half_float")):(o=!1,c.push("OES_texture_half_float")),o))return null===r.getExtension("EXT_color_buffer_half_float")?t(r,a.HALF_FLOAT_OES)?(l.push("EXT_color_buffer_half_float"),u.EXT_color_buffer_half_float={shim:!0,RGBA16F_EXT:34842,RGB16F_EXT:34843,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):c.push("EXT_color_buffer_half_float"):t(r,a.HALF_FLOAT_OES)?l.push("EXT_color_buffer_half_float"):c.push("EXT_color_buffer_half_float"),null===r.getExtension("OES_texture_half_float_linear")?e(r,a.HALF_FLOAT_OES)?(l.push("OES_texture_half_float_linear"),u.OES_texture_half_float_linear={shim:!0}):c.push("OES_texture_half_float_linear"):e(r,a.HALF_FLOAT_OES)?l.push("OES_texture_half_float_linear"):c.push("OES_texture_half_float_linear")},null!=window.WebGLRenderingContext){for(n(),h={},f=0,d=c.length;f<d;f++)s=c[f],h[s]=!0;return a=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(t){var e;return void 0===(e=u[t])?h[t]?null:a.call(this,t):e},o=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var t,e,n,i,r,a,s;for(e=[],i=0,a=(n=o.call(this)).length;i<a;i++)t=n[i],void 0===h[t]&&e.push(t);for(r=0,s=l.length;r<s;r++)t=l[r],z.call(e,t)<0&&e.push(t);return e},WebGLRenderingContext.prototype.getFloatExtension=function(t){var e,n,i,r,a,o,l,u,c,h,f,d,g,b,p,y,v,m,x,E,_,w,T,A,R,O;for(null==t.prefer&&(t.prefer=["half"]),null==t.require&&(t.require=[]),null==t.throws&&(t.throws=!0),b=this.getExtension("OES_texture_float"),o=this.getExtension("OES_texture_half_float"),d=this.getExtension("WEBGL_color_buffer_float"),r=this.getExtension("EXT_color_buffer_half_float"),g=this.getExtension("OES_texture_float_linear"),a=this.getExtension("OES_texture_half_float_linear"),f={texture:null!==b,filterable:null!==g,renderable:null!==d,score:0,precision:"single",half:!1,single:!0,type:this.FLOAT},i={texture:null!==o,filterable:null!==a,renderable:null!==r,score:0,precision:"half",half:!0,single:!1,type:null!=(A=null!=o?o.HALF_FLOAT_OES:void 0)?A:null},n=[],f.texture&&n.push(f),i.texture&&n.push(i),h=[],y=0,x=n.length;y<x;y++){for(e=n[y],p=!0,v=0,E=(R=t.require).length;v<E;v++)!1===e[s=R[v]]&&(p=!1);p&&h.push(e)}for(m=0,_=h.length;m<_;m++)for(e=h[m],l=T=0,w=(O=t.prefer).length;T<w;l=++T)c=O[l],u=Math.pow(2,t.prefer.length-l-1),e[c]&&(e.score+=u);if(h.sort((function(t,e){return t.score===e.score?0:t.score<e.score?1:t.score>e.score?-1:void 0})),0===h.length){if(t.throws)throw"No floating point texture support that is "+t.require.join(", ");return null}return{filterable:(h=h[0]).filterable,renderable:h.renderable,type:h.type,precision:h.precision}}}},function(){var t,e,n,i;if(null!=window.WebGLRenderingContext)i=["WEBKIT","MOZ","MS","O"],n=/^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/,t=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(e){var r,a,o,s,l;if(null!==(a=e.match(n))&&(e=a[1]),null===(r=t.call(this,e))){for(s=0,l=i.length;s<l;s++)if(o=i[s],null!==(r=t.call(this,o+"_"+e)))return r;return null}return r},e=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var t,i,r,a,o,s;for(r=[],o=0,s=(a=e.call(this)).length;o<s;o++)null!==(i=(t=a[o]).match(n))&&(t=i[1]),z.call(r,t)<0&&r.push(t);return r}}(),H(),j=function(){function t(t,e){var n,i;this.gl=t,i=e.vertex,n=e.fragment,this.program=this.gl.createProgram(),this.vs=this.gl.createShader(this.gl.VERTEX_SHADER),this.fs=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vs),this.gl.attachShader(this.program,this.fs),this.compileShader(this.vs,i),this.compileShader(this.fs,n),this.link(),this.value_cache={},this.uniform_cache={},this.attribCache={}}return t.prototype.attribLocation=function(t){var e;return void 0===(e=this.attribCache[t])&&(e=this.attribCache[t]=this.gl.getAttribLocation(this.program,t)),e},t.prototype.compileShader=function(t,e){if(this.gl.shaderSource(t,e),this.gl.compileShader(t),!this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))throw"Shader Compile Error: "+this.gl.getShaderInfoLog(t)},t.prototype.link=function(){if(this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw"Shader Link Error: "+this.gl.getProgramInfoLog(this.program)},t.prototype.use=function(){return this.gl.useProgram(this.program),this},t.prototype.uniformLoc=function(t){var e;return void 0===(e=this.uniform_cache[t])&&(e=this.uniform_cache[t]=this.gl.getUniformLocation(this.program,t)),e},t.prototype.int=function(t,e){var n;return this.value_cache[t]!==e&&(this.value_cache[t]=e,(n=this.uniformLoc(t))&&this.gl.uniform1i(n,e)),this},t.prototype.vec2=function(t,e,n){var i;return(i=this.uniformLoc(t))&&this.gl.uniform2f(i,e,n),this},t.prototype.float=function(t,e){var n;return this.value_cache[t]!==e&&(this.value_cache[t]=e,(n=this.uniformLoc(t))&&this.gl.uniform1f(n,e)),this},t}(),B=function(){function t(t){this.gl=t,this.buffer=this.gl.createFramebuffer()}return t.prototype.destroy=function(){return this.gl.deleteFRamebuffer(this.buffer)},t.prototype.bind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this},t.prototype.unbind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this},t.prototype.check=function(){switch(this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)){case this.gl.FRAMEBUFFER_UNSUPPORTED:throw"Framebuffer is unsupported";case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw"Framebuffer incomplete attachment";case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw"Framebuffer incomplete dimensions";case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw"Framebuffer incomplete missing attachment"}return this},t.prototype.color=function(t){return this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,t.target,t.handle,0),this.check(),this},t.prototype.depth=function(t){return this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,t.id),this.check(),this},t.prototype.destroy=function(){return this.gl.deleteFramebuffer(this.buffer)},t}(),U=function(){function t(t,e){var n,i;switch(this.gl=t,null==e&&(e={}),this.channels=this.gl[(null!=(n=e.channels)?n:"rgba").toUpperCase()],"number"==typeof e.type?this.type=e.type:this.type=this.gl[(null!=(i=e.type)?i:"unsigned_byte").toUpperCase()],this.channels){case this.gl.RGBA:this.chancount=4;break;case this.gl.RGB:this.chancount=3;break;case this.gl.LUMINANCE_ALPHA:this.chancount=2;break;default:this.chancount=1}this.target=this.gl.TEXTURE_2D,this.handle=this.gl.createTexture()}return t.prototype.destroy=function(){return this.gl.deleteTexture(this.handle)},t.prototype.bind=function(t){if(null==t&&(t=0),t>15)throw"Texture unit too large: "+t;return this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.target,this.handle),this},t.prototype.setSize=function(t,e){return this.width=t,this.height=e,this.gl.texImage2D(this.target,0,this.channels,this.width,this.height,0,this.channels,this.type,null),this},t.prototype.upload=function(t){return this.width=t.width,this.height=t.height,this.gl.texImage2D(this.target,0,this.channels,this.channels,this.type,t),this},t.prototype.linear=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this},t.prototype.nearest=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this},t.prototype.clampToEdge=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this},t.prototype.repeat=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this},t}(),D=function(){function t(t,e,n){var i;this.gl=t,this.width=e,this.height=n,i=this.gl.getFloatExtension({require:["renderable"]}),this.texture=new U(this.gl,{type:i.type}).bind(0).setSize(this.width,this.height).nearest().clampToEdge(),this.fbo=new B(this.gl).bind().color(this.texture).unbind()}return t.prototype.use=function(){return this.fbo.bind()},t.prototype.bind=function(t){return this.texture.bind(t)},t.prototype.end=function(){return this.fbo.unbind()},t.prototype.resize=function(t,e){return this.width=t,this.height=e,this.texture.bind(0).setSize(this.width,this.height)},t}(),X="attribute vec4 position;\nvarying vec2 texcoord;\nvoid main(){\n    texcoord = position.xy*0.5+0.5;\n    gl_Position = position;\n}",G="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nuniform sampler2D source;\nvarying vec2 texcoord;",N=function(){function t(t,e,n,i){var r,a,o;for(this.heatmap=t,this.gl=e,this.width=n,this.height=i,this.shader=new j(this.gl,{vertex:"attribute vec4 position, intensity;\nvarying vec2 off, dim;\nvarying float vIntensity;\nuniform vec2 viewport;\n\nvoid main(){\n    dim = abs(position.zw);\n    off = position.zw;\n    vec2 pos = position.xy + position.zw;\n    vIntensity = intensity.x;\n    gl_Position = vec4((pos/viewport)*2.0-1.0, 0.0, 1.0);\n}",fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nvarying vec2 off, dim;\nvarying float vIntensity;\nvoid main(){\n    float falloff = (1.0 - smoothstep(0.0, 1.0, length(off/dim)));\n    float intensity = falloff*vIntensity;\n    gl_FragColor = vec4(intensity);\n}"}),this.clampShader=new j(this.gl,{vertex:X,fragment:G+"uniform float low, high;\nvoid main(){\n    gl_FragColor = vec4(clamp(texture2D(source, texcoord).rgb, low, high), 1.0);\n}"}),this.multiplyShader=new j(this.gl,{vertex:X,fragment:G+"uniform float value;\nvoid main(){\n    gl_FragColor = vec4(texture2D(source, texcoord).rgb*value, 1.0);\n}"}),this.blurShader=new j(this.gl,{vertex:X,fragment:G+"uniform vec2 viewport;\nvoid main(){\n    vec4 result = vec4(0.0);\n    for(int x=-1; x<=1; x++){\n        for(int y=-1; y<=1; y++){\n            vec2 off = vec2(x,y)/viewport;\n            //float factor = 1.0 - smoothstep(0.0, 1.5, length(off));\n            float factor = 1.0;\n            result += vec4(texture2D(source, texcoord+off).rgb*factor, factor);\n        }\n    }\n    gl_FragColor = vec4(result.rgb/result.w, 1.0);\n}"}),this.nodeBack=new D(this.gl,this.width,this.height),this.nodeFront=new D(this.gl,this.width,this.height),this.vertexBuffer=this.gl.createBuffer(),this.vertexSize=8,this.maxPointCount=10240,this.vertexBufferData=new Float32Array(this.maxPointCount*this.vertexSize*6),this.vertexBufferViews=[],r=a=0,o=this.maxPointCount;0<=o?a<o:a>o;r=0<=o?++a:--a)this.vertexBufferViews.push(new Float32Array(this.vertexBufferData.buffer,0,r*this.vertexSize*6));this.bufferIndex=0,this.pointCount=0}return t.prototype.resize=function(t,e){return this.width=t,this.height=e,this.nodeBack.resize(this.width,this.height),this.nodeFront.resize(this.width,this.height)},t.prototype.update=function(){var t,e;if(this.pointCount>0)return this.gl.enable(this.gl.BLEND),this.nodeFront.use(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexBufferViews[this.pointCount],this.gl.STREAM_DRAW),e=this.shader.attribLocation("position"),t=this.shader.attribLocation("intensity"),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(e,4,this.gl.FLOAT,!1,32,0),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,32,16),this.shader.use().vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6*this.pointCount),this.gl.disableVertexAttribArray(1),this.pointCount=0,this.bufferIndex=0,this.nodeFront.end(),this.gl.disable(this.gl.BLEND)},t.prototype.clear=function(){return this.nodeFront.use(),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.nodeFront.end()},t.prototype.clamp=function(t,e){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.clampShader.use().int("source",0).float("low",t).float("high",e),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},t.prototype.multiply=function(t){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.multiplyShader.use().int("source",0).float("value",t),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},t.prototype.blur=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.blurShader.use().int("source",0).vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},t.prototype.swap=function(){var t;return t=this.nodeFront,this.nodeFront=this.nodeBack,this.nodeBack=t},t.prototype.addVertex=function(t,e,n,i,r){return this.vertexBufferData[this.bufferIndex++]=t,this.vertexBufferData[this.bufferIndex++]=e,this.vertexBufferData[this.bufferIndex++]=n,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=r,this.vertexBufferData[this.bufferIndex++]=r,this.vertexBufferData[this.bufferIndex++]=r,this.vertexBufferData[this.bufferIndex++]=r},t.prototype.addPoint=function(t,e,n,i){var r;return null==n&&(n=50),null==i&&(i=.2),this.pointCount>=this.maxPointCount-1&&this.update(),e=this.height-e,r=n/2,this.addVertex(t,e,-r,-r,i),this.addVertex(t,e,+r,-r,i),this.addVertex(t,e,-r,+r,i),this.addVertex(t,e,-r,+r,i),this.addVertex(t,e,+r,-r,i),this.addVertex(t,e,+r,+r,i),this.pointCount+=1},t}(),W=function(){function t(t){var e,n,i,r,a,o,s,l,u,c,h,f;h=null!=t?t:{},this.canvas=h.canvas,this.width=h.width,this.height=h.height,s=h.intensityToAlpha,a=h.gradientTexture,n=h.alphaRange,this.canvas||(this.canvas=document.createElement("canvas"));try{if(this.gl=this.canvas.getContext("experimental-webgl",{depth:!1,antialias:!1}),null===this.gl&&(this.gl=this.canvas.getContext("webgl",{depth:!1,antialias:!1}),null===this.gl))throw"WebGL not supported"}catch(t){throw t,"WebGL not supported"}null!=window.WebGLDebugUtils&&(console.log("debugging mode"),this.gl=WebGLDebugUtils.makeDebugContext(this.gl,(function(t,e,n){throw WebGLDebugUtils.glEnumToString(t)+" was caused by call to: "+e}))),this.gl.enableVertexAttribArray(0),this.gl.blendFunc(this.gl.ONE,this.gl.ONE),a?(c=this.gradientTexture=new U(this.gl,{channels:"rgba"}).bind(0).setSize(2,2).nearest().clampToEdge(),"string"==typeof a?((o=new Image).onload=function(){return c.bind().upload(o)},o.src=a):a.width>0&&a.height>0?c.upload(a):a.onload=function(){return c.upload(a)},r="uniform sampler2D gradientTexture;\nvec3 getColor(float intensity){\n    return texture2D(gradientTexture, vec2(intensity, 0.0)).rgb;\n}"):(c=null,r="vec3 getColor(float intensity){\n    vec3 blue = vec3(0.0, 0.0, 1.0);\n    vec3 cyan = vec3(0.0, 1.0, 1.0);\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    vec3 yellow = vec3(1.0, 1.0, 0.0);\n    vec3 red = vec3(1.0, 0.0, 0.0);\n\n    vec3 color = (\n        fade(-0.25, 0.25, intensity)*blue +\n        fade(0.0, 0.5, intensity)*cyan +\n        fade(0.25, 0.75, intensity)*green +\n        fade(0.5, 1.0, intensity)*yellow +\n        smoothstep(0.75, 1.0, intensity)*red\n    );\n    return color;\n}"),null==s&&(s=!0),s?(i=(f=null!=n?n:[0,1])[0],e=f[1],l="vec4 alphaFun(vec3 color, float intensity){\n    float alpha = smoothstep("+i.toFixed(8)+", "+e.toFixed(8)+", intensity);\n    return vec4(color*alpha, alpha);\n}"):l="vec4 alphaFun(vec3 color, float intensity){\n    return vec4(color, 1.0);\n}",this.shader=new j(this.gl,{vertex:X,fragment:G+"float linstep(float low, float high, float value){\n    return clamp((value-low)/(high-low), 0.0, 1.0);\n}\n\nfloat fade(float low, float high, float value){\n    float mid = (low+high)*0.5;\n    float range = (high-low)*0.5;\n    float x = 1.0 - clamp(abs(mid-value)/range, 0.0, 1.0);\n    return smoothstep(0.0, 1.0, x);\n}\n\n"+r+"\n"+l+"\n\nvoid main(){\n    float intensity = smoothstep(0.0, 1.0, texture2D(source, texcoord).r);\n    vec3 color = getColor(intensity);\n    gl_FragColor = alphaFun(color, intensity);\n}"}),null==this.width&&(this.width=this.canvas.offsetWidth||2),null==this.height&&(this.height=this.canvas.offsetHeight||2),this.canvas.width=this.width,this.canvas.height=this.height,this.gl.viewport(0,0,this.width,this.height),this.quad=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),u=new Float32Array([-1,-1,0,1,1,-1,0,1,-1,1,0,1,-1,1,0,1,1,-1,0,1,1,1,0,1]),this.gl.bufferData(this.gl.ARRAY_BUFFER,u,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.heights=new N(this,this.gl,this.width,this.height)}return t.prototype.adjustSize=function(){var t,e;if(e=this.canvas.offsetWidth||2,t=this.canvas.offsetHeight||2,this.width!==e||this.height!==t)return this.gl.viewport(0,0,e,t),this.canvas.width=e,this.canvas.height=t,this.width=e,this.height=t,this.heights.resize(this.width,this.height)},t.prototype.display=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.heights.nodeFront.bind(0),this.gradientTexture&&this.gradientTexture.bind(1),this.shader.use().int("source",0).int("gradientTexture",1),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t.prototype.update=function(){return this.heights.update()},t.prototype.clear=function(){return this.heights.clear()},t.prototype.clamp=function(t,e){return null==t&&(t=0),null==e&&(e=1),this.heights.clamp(t,e)},t.prototype.multiply=function(t){return null==t&&(t=.95),this.heights.multiply(t)},t.prototype.blur=function(){return this.heights.blur()},t.prototype.addPoint=function(t,e,n,i){return this.heights.addPoint(t,e,n,i)},t.prototype.addPoints=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.addPoint(e.x,e.y,e.size,e.intensity));return r},t}();var V=.25,Y=100,q=2,Z=.4,K=2-Z,Q={canvas:!1,instance:!1,overlay:!1},J={};function $(t){"update-opacity"!==t.type?"recompute-click-coordinates"!==t.type?"render-results"===t.type&&("heatmap"===t.mode?t.areResultsLoaded&&(Q.instance||function(t){Q.overlay=v("div",t),Q.overlay.style.background="#000",Q.canvas=v("canvas",t),Q.canvas.style.mixBlendMode="screen",Q.canvas.style.transform="scale(".concat((1/V).toFixed(3),")"),Q.canvas.style.transformOrigin="0 0";try{Q.instance=(e={canvas:Q.canvas},new W(e))}catch(t){console.error(t)}var e}(t.activeResolution),tt(t.opacity),function(t){if(document.body===Q.canvas.parentNode)return void et(t);document.body.appendChild(Q.overlay),document.body.appendChild(Q.canvas),et(t)}(t.activeResolution),function(t){if(!Q.instance)return;var e=function(t,e){if(!T||w)return[];if(!_[t]||!T.clicks)return[];var n=E(t,e),i=n.minWidth,r=n.maxWidth;return T.clicks.filter((function(e){var n=e.realCoordinates,a=e.windowWidthInPx;return!(a<i)&&(!(r<a)&&!(!n||!n[t]))}))}(t.activeResolution,t.resolutions);J[t.activeResolution]||function(t,e){if(!F(e))return;if(J[e])return;var n=document.body.clientWidth,i=x(e),r=Math.ceil(n/Y),a=Math.ceil(i/Y),o=new Array(a*r).fill(0);t.forEach((function(t){if(t.isVisibleInResolution[e]){var n=t.intensity,i=t.realCoordinates[e],a=i.x,s=i.y,l=Math.floor(a/Y),u=Math.floor(s/Y)*r+l;u<0&&o.length<=u||(o[u]+=n)}})),J[e]={columns:r,data:o,height:i,max:Math.max(1,o.reduce((function(t,e){return Math.max(t,e||0)}))),rows:a,width:n}}(e,t.activeResolution);if(!J[t.activeResolution])return;var n=J[t.activeResolution].max,i=t.heatmapIntensity;Q.instance.clear(),e.forEach((function(e){return function(t,e,n){if(!t.isVisibleInResolution[n])return;var i=t.realCoordinates[n],r=i.x,a=i.y,o=function(t,e){if(!J[e])return 1;var n=J[e],i=n.columns,r=n.data,a=t.realCoordinates[e],o=a.x,s=a.y,l=Math.floor(o/Y),u=Math.floor(s/Y)*i+l;if(u<0&&r.length<=u)return 1;return J[e].data[u]}(t,n),s=(o/e*K+Z)/o,l=(u=o,c=0,h=e,f=q,d=1,f+(d-f)/(h-c)*(u-c));var u,c,h,f,d;Q.instance.addPoint(r*V,a*V,l*Y*V,s)}(e,n,t.activeResolution)})),Q.instance.update(),Q.instance.multiply(i),Q.instance.update(),Q.instance.display()}(t)):function(){document.body===Q.canvas.parentNode&&document.body.removeChild(Q.canvas);document.body===Q.overlay.parentNode&&document.body.removeChild(Q.overlay)}()):J={}:tt(t.value)}function tt(t){Q.overlay&&void 0!==t&&(Q.overlay.style.opacity=t)}function et(t){m(Q.overlay,t);var e=document.body.clientWidth*V,n=x(t)*V;Q.canvas.style.width="".concat(e,"px"),Q.canvas.style.height="".concat(n,"px"),Q.instance.adjustSize(e,n)}function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var it=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],rt=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function at(t,e,n,i,r){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===nt(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,i,r)}catch(t){throw new Error("unable to access image data: "+t)}}function ot(t,e,n,i,r,a){if(!(isNaN(a)||a<1)){a|=0;var o=at(t,e,n,i,r);o=function(t,e,n,i,r,a){var o,s,l,u,c,h,f,d,g,b,p,y,v,m,x,E,_,w,T,A,R,O=t.data,F=2*a+1,S=i-1,C=r-1,I=a+1,P=I*(I+1)/2,L=new st,M=L;for(l=1;l<F;l++)M=M.next=new st,l===I&&(R=M);M.next=L;var k=null,B=null;f=h=0;var N=it[a],D=rt[a];for(s=0;s<r;s++){for(m=x=E=d=g=b=0,p=I*(_=O[h]),y=I*(w=O[h+1]),v=I*(T=O[h+2]),d+=P*_,g+=P*w,b+=P*T,M=L,l=0;l<I;l++)M.r=_,M.g=w,M.b=T,M=M.next;for(l=1;l<I;l++)u=h+((S<l?S:l)<<2),d+=(M.r=_=O[u])*(A=I-l),g+=(M.g=w=O[u+1])*A,b+=(M.b=T=O[u+2])*A,m+=_,x+=w,E+=T,M=M.next;for(k=L,B=R,o=0;o<i;o++)O[h]=d*N>>D,O[h+1]=g*N>>D,O[h+2]=b*N>>D,d-=p,g-=y,b-=v,p-=k.r,y-=k.g,v-=k.b,u=f+((u=o+a+1)<S?u:S)<<2,m+=k.r=O[u],x+=k.g=O[u+1],E+=k.b=O[u+2],d+=m,g+=x,b+=E,k=k.next,p+=_=B.r,y+=w=B.g,v+=T=B.b,m-=_,x-=w,E-=T,B=B.next,h+=4;f+=i}for(o=0;o<i;o++){for(x=E=m=g=b=d=0,p=I*(_=O[h=o<<2]),y=I*(w=O[h+1]),v=I*(T=O[h+2]),d+=P*_,g+=P*w,b+=P*T,M=L,l=0;l<I;l++)M.r=_,M.g=w,M.b=T,M=M.next;for(c=i,l=1;l<=a;l++)h=c+o<<2,d+=(M.r=_=O[h])*(A=I-l),g+=(M.g=w=O[h+1])*A,b+=(M.b=T=O[h+2])*A,m+=_,x+=w,E+=T,M=M.next,l<C&&(c+=i);for(h=o,k=L,B=R,s=0;s<r;s++)O[u=h<<2]=d*N>>D,O[u+1]=g*N>>D,O[u+2]=b*N>>D,d-=p,g-=y,b-=v,p-=k.r,y-=k.g,v-=k.b,u=o+((u=s+I)<C?u:C)*i<<2,d+=m+=k.r=O[u],g+=x+=k.g=O[u+1],b+=E+=k.b=O[u+2],k=k.next,p+=_=B.r,y+=w=B.g,v+=T=B.b,m-=_,x-=w,E-=T,B=B.next,h+=i}return t}(o,0,0,i,r,a),t.getContext("2d").putImageData(o,e,n)}}var st=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},lt={canvas:!1,averageFold:!1,stats:!1,statsTracker:!1,scrolls:!1,data:{},images:{},activeResolution:!1},ut=50,ct=["#000000","#00031d","#00052d","#00094f","#000c6a","#000f7f","#0014ac","#0017c6","#001dff","#003dff","#0074ff","#009cff","#00bcff","#00d3ff","#00ebff","#00ffeb","#00ffac","#00ff74","#00ff4d","#2aff00","#62ff00","#91ff00","#b1ff00","#d1ff00","#f8ff00","#ffde00","#ffbe00","#ff9700","#ff7700","#ff5f00","#ff4700","#ff0000"];function ht(t){"update-opacity"!==t.type?"render-results"===t.type&&("scrollmap"===t.mode?t.areResultsLoaded&&(lt.scrolls||(lt.scrolls=!T||w?[]:T.scrolls?T.scrolls:[]),lt.canvas||function(t){lt.canvas=v("canvas",t),lt.canvas.style.opacity="0.75",lt.averageFold=v("div",t),lt.averageFold.style.display="none",lt.averageFold.style.height="auto",lt.averageFold.style.borderBottom="2px dashed #262b2d",lt.averageFold.style.textAlign="center";var e=document.createElement("span");e.style.fontSize="18px",e.style.margin="0 auto",e.style.borderRadius="4px",e.style.fontWeight="600",e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',e.style.background="#262b2d",e.style.pointerEvents="none",e.style.color="#eee",e.style.display="inline-block",e.style.transform="translate(-50%, -50%)",e.style.position="absolute",e.style.whiteSpace="nowrap",lt.averageFold.appendChild(e),e.innerHTML='\n\t\t<span class="nab-data-block" style="padding:0 1em;">\n\t\t\t<span class="dashicons dashicons-image-flip-vertical" style="vertical-align: text-top;margin-right: 5px;"></span>\n\t\t\t'.concat(Object(h._x)("Average Fold:","text","nelio-ab-testing"),'\n\t\t\t<output id="nab-average-fold"></output>\n\t\t</span>\n\t'),lt.stats=v("div",t),lt.stats.style.height="auto",lt.stats.style.borderBottom="2px dashed #262b2d",lt.stats.style.opacity=0,lt.stats.style.transition="opacity 200ms ease-in-out";var n=document.createElement("span");n.style.fontSize="18px",n.style.left="1em",n.style.borderRadius="4px",n.style.fontWeight="600",n.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',n.style.background="#262b2d",n.style.pointerEvents="none",n.style.color="#eee",n.style.display="inline-block",n.style.position="absolute",n.style.transform="translate(0, -50%)",n.style.whiteSpace="nowrap",n.innerHTML='\n\t\t<span class="nab-data-block" style="padding:0 1em;">'.concat(Object(h._x)("Popularity:","text","nelio-ab-testing"),' <output id="nab-popularity"></output></span>\n\t'),lt.statsTracker=v("div",t),lt.stats.appendChild(n),lt.statsTracker.addEventListener("mouseenter",(function(){lt.stats.style.opacity=1})),lt.statsTracker.addEventListener("mouseleave",(function(){lt.stats.style.opacity=0})),lt.statsTracker.addEventListener("mousemove",(function(t){var e=lt.data[lt.activeResolution],n=e.rows,i=e.maxHits,r=n[Math.floor(t.y/ut)],a=Math.round(100*r/i)||0;document.getElementById("nab-popularity").innerHTML=a.toLocaleString()+"%",lt.stats.style.top=Math.max(t.y,0)+"px"}))}(t.activeResolution),lt.activeResolution=t.activeResolution,ft(t.opacity),function(t){if(lt.averageFold.style.width="".concat(document.body.clientWidth,"px"),lt.stats.style.width="".concat(document.body.clientWidth,"px"),m(lt.canvas,t),m(lt.statsTracker,t),document.body===lt.canvas.parentNode)return;document.body.appendChild(lt.canvas),document.body.appendChild(lt.averageFold),document.body.appendChild(lt.stats),document.body.appendChild(lt.statsTracker)}(t.activeResolution),function(t){var e=t.activeResolution,n=t.resolutions;lt.images[e]||function(t){var e=t.activeResolution,n=t.resolutions;lt.data[e]||function(t,e){var n=window.document.body.clientHeight,i=x(t),r=Math.ceil(i/ut),a=new Array(r).fill(0),o=0,s=function(t,e,n){var i=E(e,n),r=i.minWidth,a=i.maxWidth;return t.filter((function(t){var e=t.windowWidth;return r<=e&&e<=a}))}(lt.scrolls,t,e);s.forEach((function(t){var e=t.firstFold,i=t.maxScroll,s=t.sweetSpot,l=t.documentHeight;o+=e,i=Math.round(i/l*n),s=Math.round(s/l*n);for(var u=Math.ceil(i/ut),c=Math.min(u,r-1),h=0;h<=c;++h)a[h]=++a[h]||1;for(var f=Math.floor((s-e/2)/ut),d=Math.ceil((s+e/2)/ut),g=Math.min(d,r-1),b=Math.max(0,f);b<=g;++b)a[b]=++a[b]||1})),lt.data[t]={rows:a,maxHits:pt(a),averageFold:Math.ceil(o/s.length)||!1}}(e,n);var i=lt.data[e],r=i.rows,a=i.maxHits,o=document.createElement("canvas");o.width=1,o.height=r.length;var s=o.getContext("2d");(function(t){for(var e=t,n=0;n<5;++n)e=dt(e);return e})(r.map((function(t){return Math.floor(t/a*(ct.length-1))}))).forEach((function(t,e){s.fillStyle=ct[t],s.fillRect(0,e,lt.canvas.width,1)})),ot(o,0,0,o.width,o.height,100/ut),lt.images[e]=o}({activeResolution:e,resolutions:n});var i=lt.images[e],r=lt.canvas.getContext("2d");lt.canvas.width=i.width,lt.canvas.height=i.height,r.clearRect(0,0,lt.canvas.width,lt.canvas.height),r.drawImage(i,0,0),function(t,e){var n=e[t].height,i=lt.data[t].averageFold,r=document.getElementById("nab-average-fold");i?(r.innerHTML="".concat(i.toLocaleString(),"px"),lt.averageFold.style.top="".concat(n,"px"),lt.averageFold.style.display="block"):(r.innerHTML="–",lt.averageFold.style.display="none")}(e,n)}(t)):function(){document.body===lt.canvas.parentNode&&document.body.removeChild(lt.canvas);document.body===lt.stats.parentNode&&document.body.removeChild(lt.stats);document.body===lt.averageFold.parentNode&&document.body.removeChild(lt.averageFold);document.body===lt.statsTracker.parentNode&&document.body.removeChild(lt.statsTracker)}()):ft(t.value)}function ft(t){lt.canvas&&void 0!==t&&(lt.canvas.style.opacity=t)}function dt(t){if(!t.length)return t;var e=gt(t),n=bt(t),i=pt(t)-n,r=t.length;t=[].concat(o()(new Array(10).fill(t[0]||0)),o()(t),o()(new Array(10).fill(t[t.length-1]||0)));for(var a=[],s=1;s<t.length-1;++s){var l=t[s],u=gt([e,a[s-1]||t[s-1],l,t[s+1]]);a.push(u)}var c=bt(a=a.splice(9,r)),h=pt(a)-c;return a.map((function(t){return(t-c)/h})).map((function(t){return Math.round(t*i)+n}))}function gt(t){return t.reduce((function(t,e){return t+e}),0)/t.length}function bt(t){return t.reduce((function(t,e){return Math.min(t,e)}),Number.POSITIVE_INFINITY)}function pt(t){return t.reduce((function(t,e){return Math.max(t,e)}),Number.NEGATIVE_INFINITY)}var yt=n(29),vt=n.n(yt),mt=n(4),xt=n.n(mt),Et=n(9);function _t(t,e){if("other"===e)return"#ec82b6";switch(t){case"country":return function(t){return{AR:"#75aadb",AU:"#008000",BR:"#2dc52d",CA:"#f71818",CN:"#ff0000",FI:"#2008ff",FR:"#0000ff",DE:"#b97575",GR:"#9292da",IS:"#9494c3",IN:"#ffa500",IT:"#007fff",JP:"#e8f48c",NL:"#ff7f00",NZ:"#993333",NO:"#00008b",PT:"#218000",RU:"#3e3e77",ES:"#ff0000",GB:"#e64444",US:"#ec7777"}[t]}(e);case"device":return function(t){return{desktop:"#11a0d2",console:"#f17b45",mobile:"#ffc65d",tablet:"#7bc8a4",smarttv:"#93648d",wearable:"#4bc0d6",embedded:"#ec82b6"}[t]}(e);case"os":return function(t){if("Mac OS X"===(t="".concat(t)))return"#e6e6e6";if(-1!==t.indexOf("Windows 10"))return"#066b96";if(-1!==t.indexOf("Windows Phone"))return"#097cae";if(-1!==t.indexOf("Windows 7"))return"#0a8bc3";if(-1!==t.indexOf("Windows Vista"))return"#049cde";if(-1!==t.indexOf("Windows XP"))return"#35afe4";if(-1!==t.indexOf("Windows"))return"#67c5ef";return{"Chromium OS":"#63c7c5","Mac OS":"#c3c3c3",Android:"#97e375",Debian:"#ff7185",Fuchsia:"#d0608a",Linux:"#5e2c80",Mint:"#7aaa65",SUSE:"#84bc91",Ubuntu:"#f28b4a",iOS:"#d6d6d6"}[t]}(e);case"browser":return function(t){if(-1!==(t="".concat(t)).indexOf("IE 11"))return"#066b96";if(-1!==t.indexOf("IE 10"))return"#097cae";if(-1!==t.indexOf("IE 9"))return"#0a8bc3";if(-1!==t.indexOf("IE 8"))return"#049cde";if(-1!==t.indexOf("IE 7"))return"#35afe4";if(-1!==t.indexOf("IE"))return"#67c5ef";return{"Opera Mini":"#ff6060","Opera Mobi":"#ff9090","Samsung Browser":"#93648d",Chrome:"#7bc8a4",Chromium:"#6cbc6d",Edge:"#024b6e",Firefox:"#f28b4a",Mozilla:"#f29f79",Opera:"#f24a4a",Safari:"#ffc65d",Vivaldi:"#ef6dd2"}[t]}(e);case"dayOfWeek":return function(t){return["#ec82b6","#f17b45","#ffc65d","#7bc8a4","#4cc3d9","#4c8ad9","#93648d","#ec82b6"][t]}(e);case"hourOfDay":return function(t){return["#003e6b","#034d71","#066b96","#64c8c6","#dbeabf","#e3e075","#faca5c","#f28b4a","#d1618b","#9a4987","#5e2c80","#15205a"][t]}(e);default:return function(t){return["#cb0a0a","#ef4444","#f17b45","#ffb039","#ffc65d","#bfe656","#7bc8a4","#59d1b7","#4cc3d9","#42b0ec","#4a87d5","#5b52f3","#91628b","#753966"][t]}(e)}}function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(n,!0).forEach((function(e){xt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var At,Rt=["#753966","#91628b","#5b52f3","#4a87d5","#42b0ec","#4cc3d9","#59d1b7","#7bc8a4","#bfe656","#ffc65d","#ffb039","#f17b45","#ef4444","#cb0a0a"],Ot={canvas:!1,overlay:!1};function Ft(t,e){var n,i,r,a,o,s=e.dispatch;"update-opacity"!==t.type?"render-results"===t.type&&("confetti"===t.mode?t.areResultsLoaded&&(Ot.canvas||(Ot.overlay=v("div","desktop"),Ot.overlay.style.background="#000",Ot.canvas=v("canvas","desktop")),At||(n=O(),At=function(t){var e={country:{},device:{},os:{},browser:{},dayOfWeek:{},hourOfDay:{},timeToClick:{},windowWidth:{}};return t.forEach((function(t){e.country[t.country]=(e.country[t.country]||0)+t.intensity,e.device[t.device]=(e.device[t.device]||0)+t.intensity,e.os[t.os]=(e.os[t.os]||0)+t.intensity,e.browser[t.browser]=(e.browser[t.browser]||0)+t.intensity,e.dayOfWeek[t.dayOfWeek]=(e.dayOfWeek[t.dayOfWeek]||0)+t.intensity,e.hourOfDay[t.hourOfDay]=(e.hourOfDay[t.hourOfDay]||0)+t.intensity,e.timeToClick[t.timeToClick]=(e.timeToClick[t.timeToClick]||0)+t.intensity,e.windowWidth[t.windowWidth]=(e.windowWidth[t.windowWidth]||0)+t.intensity})),Object.keys(e).reduce((function(t,n){return Tt({},t,xt()({},n,function(t,e){switch(t){case"country":case"device":return Ct(t,e);case"os":var n=Ct(t,e);return i=n,r={"Windows 10":"Windows 01","Windows Phone":"Windows 02","Windows 7":"Windows 03","Windows Vista":"Windows 04","Windows XP":"Windows 05","Windows 98":"Windows 06","Windows 95":"Windows 07",Windows:"Windows 08"},i=Object(Et.values)(i).map((function(t){var e=t.key,n=vt()(t,["key"]);return Tt({key:e,sorting:r[e]?r[e]:e},n)})),i=Object(Et.orderBy)(i,"sorting"),Object(Et.keyBy)(i,"key");case"browser":return function(t){var e={"IE 11":"IE 01","IE 10":"IE 02","IE 9":"IE 03","IE 8":"IE 04","IE 7":"IE 05","IE 6":"IE 06",IE:"IE 07"};return t=Object(Et.values)(t).map((function(t){var n=t.key,i=vt()(t,["key"]);return Tt({key:n,sorting:e[n]?e[n]:n},i)})),t=Object(Et.orderBy)(t,"sorting"),Object(Et.keyBy)(t,"key")}(Ct(t,e));case"dayOfWeek":case"hourOfDay":case"timeToClick":case"windowWidth":return function(t,e){var n={dayOfWeek:[{label:Object(h._x)("Sunday","text","nelio-ab-testing")},{label:Object(h._x)("Monday","text","nelio-ab-testing")},{label:Object(h._x)("Tuesday","text","nelio-ab-testing")},{label:Object(h._x)("Wednesday","text","nelio-ab-testing")},{label:Object(h._x)("Thursday","text","nelio-ab-testing")},{label:Object(h._x)("Friday","text","nelio-ab-testing")},{label:Object(h._x)("Saturday","text","nelio-ab-testing")}],hourOfDay:[{label:Object(h._x)("12a - 2a","text","nelio-ab-testing")},{label:Object(h._x)("2a - 4a","text","nelio-ab-testing")},{label:Object(h._x)("4a - 6a","text","nelio-ab-testing")},{label:Object(h._x)("6a - 8a","text","nelio-ab-testing")},{label:Object(h._x)("8a - 10a","text","nelio-ab-testing")},{label:Object(h._x)("10a - 12p","text","nelio-ab-testing")},{label:Object(h._x)("12p - 2p","text","nelio-ab-testing")},{label:Object(h._x)("2p - 4p","text","nelio-ab-testing")},{label:Object(h._x)("4p - 6p","text","nelio-ab-testing")},{label:Object(h._x)("6p - 8p","text","nelio-ab-testing")},{label:Object(h._x)("8p - 10p","text","nelio-ab-testing")},{label:Object(h._x)("10p - 12a","text","nelio-ab-testing")}],timeToClick:[{label:Object(h._x)("0 - 2s","text","nelio-ab-testing")},{label:Object(h._x)("2 - 3s","text","nelio-ab-testing")},{label:Object(h._x)("3 - 4s","text","nelio-ab-testing")},{label:Object(h._x)("4 - 5s","text","nelio-ab-testing")},{label:Object(h._x)("5 - 10s","text","nelio-ab-testing")},{label:Object(h._x)("10 - 15s","text","nelio-ab-testing")},{label:Object(h._x)("15 - 20s","text","nelio-ab-testing")},{label:Object(h._x)("20 - 25s","text","nelio-ab-testing")},{label:Object(h._x)("25 - 30s","text","nelio-ab-testing")},{label:Object(h._x)("30 - 60s","text","nelio-ab-testing")},{label:Object(h._x)("1 - 2min","text","nelio-ab-testing")},{label:Object(h._x)("2 - 3min","text","nelio-ab-testing")},{label:Object(h._x)("3 - 5min","text","nelio-ab-testing")},{label:Object(h._x)("+5min","text","nelio-ab-testing")}],windowWidth:[{label:Object(h._x)("< 300 px","text","nelio-ab-testing")},{label:Object(h._x)("300 - 600px","text","nelio-ab-testing")},{label:Object(h._x)("600 - 900px","text","nelio-ab-testing")},{label:Object(h._x)("900 - 1200px","text","nelio-ab-testing")},{label:Object(h._x)("1200 - 1500px","text","nelio-ab-testing")},{label:Object(h._x)("1500 - 1800px","text","nelio-ab-testing")},{label:Object(h._x)("1800 - 2100px","text","nelio-ab-testing")},{label:Object(h._x)("+2100px","text","nelio-ab-testing")}]}[t].map((function(t,n){return{key:n,label:t.label,value:e[n]||0}})),i=0;return Object(Et.keyBy)(n.map((function(e){return Tt({},e,{color:_t(t,e.key)||Rt[i++]})})),"key")}(t,e)}var i,r}(n,e[n])))}),{})}(n),s("nab/data").setPageAttribute("confettiFilterOptions",At)),St(t.opacity),function(t){if(m(Ot.overlay,t),m(Ot.canvas,t),document.body===Ot.canvas.parentNode)return;document.body.appendChild(Ot.overlay),document.body.appendChild(Ot.canvas)}(),r=(i=t).activeFilter,a=i.disabledFilterOptions,(o=Ot.canvas.getContext("2d")).clearRect(0,0,Ot.canvas.width,Ot.canvas.height),o.lineWidth=1,o.strokeStyle="#000",O().filter((function(t){return function(t,e,n){var i=t[e];return Object.keys(At[e]).includes("".concat(i))||(i="other"),!n.includes(i)}(t,r,a)})).forEach((function(t){return function(t,e,n){if(e.realCoordinates&&e.realCoordinates.desktop&&e.isVisibleInResolution.desktop){var i=e.realCoordinates.desktop,r=i.x,a=i.y,o=At[n];t.fillStyle=o[e[n]]?o[e[n]].color:_t(n,"other"),t.beginPath(),t.arc(r,a,6,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()}}(o,t,r)}))):function(){document.body===Ot.canvas.parentNode&&document.body.removeChild(Ot.canvas);document.body===Ot.overlay.parentNode&&document.body.removeChild(Ot.overlay)}()):St(t.value)}function St(t){Ot.overlay&&void 0!==t&&(Ot.overlay.style.opacity=t)}function Ct(t,e){var n=Object(Et.orderBy)(Object.keys(e).map((function(t){return{key:t,value:e[t]}})),"value","desc"),i=n.splice(0,14);i=Object(Et.orderBy)(i,"key"),n.length&&i.push({key:"other",value:n.reduce((function(t,e){return t+e.value}),0)});var r=0;return Object(Et.keyBy)(i.map((function(e){var n=e.key,i=e.value;return{key:n,label:It(t,n),value:i,color:_t(t,n)||Rt[r++]}})),"key")}function It(t,e){if("other"===e)return Object(h._x)("Other","text","nelio-ab-testing");switch(t){case"device":return e[0].toUpperCase()+e.slice(1);case"country":case"os":case"browser":default:return e}}function Pt(t){var e=t.data,n=window.parent.wp.data,i=n.select,r=n.dispatch;M(e,{select:i,dispatch:r}),$(e),ht(e),Ft(e,{select:i,dispatch:r})}r()((function(){!function(){if(window.parent&&window.parent.wp&&window.parent.wp&&window.parent.wp.data){var t=window.parent.wp.data,e=t.select,n=t.dispatch,i=e("nab/data").getPageAttribute("activeExperiment"),r=e("nab/data").getPageAttribute("activeAlternative"),a=e("nab/data").getExperiment(i),o=(a.alternatives||[]).map((function(t){return t.id})).indexOf(r);if(-1!==o)window.addEventListener("message",Pt,!1),R(a,o,{awsAuthToken:e("nab/data").getPageAttribute("awsAuthToken"),siteId:e("nab/data").getPageAttribute("siteId"),timezone:e("nab/data").getPageAttribute("timezone"),dispatch:n})}else console.error("Parent window doesn’t have expected API. Bye!")}()}))}]);