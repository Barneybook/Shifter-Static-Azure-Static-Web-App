!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=63)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){!function(){t.exports=this.wp.i18n}()},,function(t,e){!function(){t.exports=this.wp.components}()},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){!function(){t.exports=this.wp.data}()},function(t,e){!function(){t.exports=this.wp.compose}()},,function(t,e){!function(){t.exports=this.wp.apiFetch}()},,,,,,function(t,e){!function(){t.exports=this.nab.components}()},,,,function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}},function(t,e){!function(){t.exports=this.nab.data}()},function(t,e){!function(){t.exports=this.nab.experimentLibrary}()},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},,function(t,e,n){var o=n(27),r=n(22);t.exports=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?r(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var o=n(28);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=o=function(t){return n(t)}:t.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},o(e)}t.exports=o},function(t,e){function n(e,o){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,o)}t.exports=n},,,,,,,,function(t,e){!function(){t.exports=this.wp.plugins}()},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);var o=n(4),r=n.n(o),i=(n(20),n(0)),a=n(21),c=n(18),l=n.n(c),s=n(19),p=n.n(s),u=n(24),b=n.n(u),m=n(25),f=n.n(m),d=n(22),g=n.n(d),O=n(26),y=n.n(O),x=n(3),j=n(8),v=n.n(j),E=n(1),h=n(5),w=n(6),_=n(14),I=(n(58),function(t){function e(){var t;return l()(this,e),(t=b()(this,f()(e).apply(this,arguments))).toggleImport=t.toggleImport.bind(g()(t)),t.toggleConfirmationDialog=t.toggleConfirmationDialog.bind(g()(t)),t.importContent=t.importContent.bind(g()(t)),t}return y()(e,t),p()(e,[{key:"toggleImport",value:function(){var t=this.props,e=t.isImportEnabled;(0,t.setState)((function(){return{isImportEnabled:!e}}))}},{key:"toggleConfirmationDialog",value:function(){var t=this.props,e=t.isConfirmationDialogVisible;(0,t.setState)((function(){return{isConfirmationDialogVisible:!e}}))}},{key:"importContent",value:function(){var t=this.props,e=t.postBeingEdited,n=t.postIdToImportFrom;(0,t.setState)((function(){return{isImporting:!0}})),v()({path:"/nab/v1/post/".concat(n,"/overwrites/").concat(e),method:"PUT"}).finally((function(){window.location.reload()}))}},{key:"render",value:function(){var t=this.props,e=t.postBeingEdited,n=t.setState,o=t.postIdToImportFrom,r=t.isConfirmationDialogVisible,a=t.isImportEnabled,c=t.isImporting,l=t.Icon,s=t.experimentName,p=t.experimentUrl,u=t.alternatives,b=t.type;return l?Object(i.createElement)(i.Fragment,null,Object(i.createElement)(x.PanelRow,{className:"nab-test-panel"},Object(i.createElement)("span",{className:"nab-test-panel__icon"},Object(i.createElement)(l,null)),Object(i.createElement)("a",{className:"nab-test-panel__name",href:p},s||Object(E._x)("Unnamed Test","text","nelio-ab-testing"))),u&&u.length&&Object(i.createElement)(x.PanelRow,{className:"nab-variants-panel"},Object(i.createElement)("h2",{className:"nab-variants-panel__title"},Object(E._x)("Variants","text","nelio-ab-testing")),u.map((function(t){var n=t.name,o=t.link,r=t.postId,a=t.index;return Object(i.createElement)("div",{className:"nab-alternative",key:a},Object(i.createElement)("span",{className:"nab-alternative__letter"},N(a)),Object(i.createElement)("span",{className:"nab-alternative__name"},e!==r?Object(i.createElement)("a",{className:"hide-if-no-js",href:o},C(n,a)):Object(i.createElement)("strong",null,C(n,a))))}))),Object(i.createElement)(x.PanelRow,{className:"nab-content-panel"},Object(i.createElement)("h2",{className:"nab-content-panel__title"},Object(E._x)("Content","text","nelio-ab-testing")),Object(i.createElement)("span",{className:"nab-content-panel__label"},Object(i.createElement)(x.Dashicon,{icon:"admin-page"}),a?Object(E._x)("Import content from:","text","nelio-ab-testing"):Object(i.createElement)(x.Button,{isLink:!0,onClick:this.toggleImport},Object(E._x)("Import Content","command","nelio-ab-testing"))),a&&Object(i.createElement)(i.Fragment,null,Object(i.createElement)(_.PostSearcher,{value:o,className:"nab-content-panel__searcher",type:b,onChange:function(t){return n({postIdToImportFrom:t})}}),Object(i.createElement)("div",{className:"nab-content-panel__actions"},Object(i.createElement)(x.Button,{isLink:!0,onClick:this.toggleImport},Object(E._x)("Cancel","command","nelio-ab-testing")),Object(i.createElement)(x.Button,{isDefault:!0,disabled:!o,onClick:this.toggleConfirmationDialog},Object(E._x)("Import","command","nelio-ab-testing")),Object(i.createElement)(_.ConfirmationDialog,{title:Object(E._x)("Import Content?","text","nelio-ab-testing"),text:Object(E._x)("This will overwrite the current content.","text","nelio-ab-testing"),confirmLabel:c?Object(E._x)("Importingâ€¦","text","nelio-ab-testing"):Object(E._x)("Import","command","nelio-ab-testing"),isConfirmEnabled:!c,isCancelEnabled:!c,isOpen:r,onCancel:this.toggleConfirmationDialog,onConfirm:this.importContent}))))):null}}]),e}(i.Component)),C=function(t,e){return t||(0===e?Object(E._x)("Control Version","text","nelio-ab-testing"):Object(E.sprintf)(Object(E._x)("Variant %s","text","nelio-ab-testing"),N(e)))},P=Object(h.withSelect)((function(t,e){var n=e.experimentId,o=(0,t("nab/data").getExperiment)(n);if(o){var r=t("nab/experiments").getExperimentTypes,i=o.type,a=o.name,c=o.alternatives,l=o.experimentUrl,s=r()[i];return{Icon:s&&s.icon,experimentName:a,experimentUrl:l,alternatives:c.map((function(t,e){return{index:e,postId:t.attributes.postId,name:t.attributes.name,link:t.links.edit}}))}}})),S=Object(w.withState)({isImportEnabled:!1,isImporting:!1,isConfirmationDialogVisible:!1,postIdToImportFrom:!1}),N=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return t>=e.length?t-e.length+1:e.charAt(t)},D=Object(w.compose)(S,P)(I);var k=n(36),B=(n(59),window.wp&&window.wp.editPost&&window.wp.editPost.PluginDocumentSettingPanel),T=B?function(t){var e=t.experimentId,n=t.postBeingEdited,o=t.type;return Object(i.createElement)(B,{className:"nab-alternative-editing-sidebar",title:Object(E._x)("Nelio A/B Testing","text","nelio-ab-testing"),icon:"none"},Object(i.createElement)(D,{experimentId:e,postBeingEdited:n,type:o}))}:function(){return null};function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}window.nab=window.nab||{},window.nab=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},window.nab,{initEditPostAlternativeMetabox:function(t){Object(a.registerCoreExperiments)();var e=t.experimentId,n=t.postBeingEdited,o=t.type,r=document.getElementById("nelioab_edit_post_alternative_box").getElementsByClassName("inside")[0];Object(i.render)(Object(i.createElement)(D,{experimentId:e,postBeingEdited:n,type:o}),r)},initEditPostAlternativeBlockEditorSidebar:function(t){Object(a.registerCoreExperiments)();var e=t.experimentId,n=t.postBeingEdited,o=t.type;Object(k.registerPlugin)("nelio-ab-testing",{render:function(){return Object(i.createElement)(T,{experimentId:e,postBeingEdited:n,type:o})}})}})}]);